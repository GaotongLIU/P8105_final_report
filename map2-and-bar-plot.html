<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ruoyuan Qian" />

<meta name="date" content="2019-11-15" />

<title>Untitled</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Project Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">Final report</a>
</li>
<li>
  <a href="data.html">Data</a>
</li>
<li>
  <a href="https://yuqimiao.shinyapps.io/Gaotong/">Associaiton Map</a>
</li>
<li>
  <a href="global_animation_plot.html">Global Animation Map</a>
</li>
<li>
  <a href="mailto:&lt;gl2677@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/GaotongLIU/P8105_final_report.io.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="section-header">



<h1 class="title toc-ignore">Untitled</h1>
<h4 class="author">Ruoyuan Qian</h4>
<h4 class="date">11/15/2019</h4>

</div>


<pre class="r"><code>library(plotly)
library(shiny)
library(tidyverse)
library(rworldmap)
library(arsenal)
library(leaflet)
library(rworldmap) 
library(countrycode)  # Gets country code 
library(viridis)</code></pre>
<pre class="r"><code>happy = read_csv(&quot;data/final_data_all_country.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  unique %&gt;% 
  filter(year == 2018) %&gt;% 
  mutate(label = str_c(&quot;&lt;b&gt;Happiness: &quot;, round(life_ladder,2), 
                      &quot;&lt;/b&gt;&lt;br&gt;Country : &quot;, country_name,
                      sep = &quot;&quot;),
        code = countrycode(country_name, &#39;country.name&#39;, &#39;iso3c&#39;),## match code
        code = replace_na(code,&quot;XKX&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   country_name = col_character(),
##   year = col_double(),
##   life_ladder = col_double(),
##   log_gdp_per_capita = col_double(),
##   social_support = col_double(),
##   healthy_life_expectancy_at_birth = col_double(),
##   freedom_to_make_life_choices = col_double(),
##   generosity = col_double(),
##   perceptions_of_corruption = col_double(),
##   positive_affect = col_double(),
##   negative_affect = col_double()
## )</code></pre>
<pre><code>## Warning in countrycode(country_name, &quot;country.name&quot;, &quot;iso3c&quot;): Some values were not matched unambiguously: Kosovo</code></pre>
<pre class="r"><code># light grey boundaries
l &lt;- list(color = toRGB(&quot;grey&quot;), width = 0.5)

# specify map projection/options
g &lt;- list(
  showframe = FALSE,
  showcoastlines = FALSE,
  projection = list(type = &#39;Mercator&#39;)
)</code></pre>
<pre class="r"><code>happy = read_csv(&quot;data/final_data_all_country.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  unique %&gt;% 
  mutate(label = str_c(&quot;&lt;b&gt;Happiness: &quot;, round(life_ladder,2), 
                      &quot;&lt;/b&gt;&lt;br&gt;Country : &quot;, country_name,
                      sep = &quot;&quot;),
        code = countrycode(country_name, &#39;country.name&#39;, &#39;iso3c&#39;),## match code
        code = replace_na(code,&quot;XKX&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   country_name = col_character(),
##   year = col_double(),
##   life_ladder = col_double(),
##   log_gdp_per_capita = col_double(),
##   social_support = col_double(),
##   healthy_life_expectancy_at_birth = col_double(),
##   freedom_to_make_life_choices = col_double(),
##   generosity = col_double(),
##   perceptions_of_corruption = col_double(),
##   positive_affect = col_double(),
##   negative_affect = col_double()
## )</code></pre>
<pre><code>## Warning in countrycode(country_name, &quot;country.name&quot;, &quot;iso3c&quot;): Some values were not matched unambiguously: Kosovo</code></pre>
<pre class="r"><code>location = read_csv(&quot;data/concap.csv&quot;) %&gt;% 
  janitor::clean_names() </code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   CountryName = col_character(),
##   CapitalName = col_character(),
##   CapitalLatitude = col_double(),
##   CapitalLongitude = col_double(),
##   CountryCode = col_character(),
##   ContinentName = col_character()
## )</code></pre>
<pre class="r"><code>happy_location_raw = left_join(happy, location, by = &quot;country_name&quot;)

 list &lt;-which(rowSums(is.na(happy_location_raw %&gt;% 
                              select(capital_latitude))) &gt; 0)
  data_all_na &lt;- happy_location_raw[list,] 
 
  happy_location_lost =  
 happy_location_raw[list,] %&gt;% 
   mutate(capital_latitude = case_when(
    country_name == &quot;Congo (Brazzaville)&quot; ~ -4.267778,
    country_name == &quot;Ivory Coast&quot; ~ 6.85,
    country_name == &quot;Gambia&quot; ~ 13.466667,
    country_name == &quot;North Cyprus&quot; ~ 35.183333,
    country_name == &quot;Palestinian Territories&quot; ~ 31.516667,
    country_name == &quot;Taiwan Province of China&quot;~ 25.066667,
    country_name == &quot;Somaliland region&quot;~ 9.55,
    country_name == &quot;Congo (Kinshasa)&quot;~ -4.316667,
    country_name == &quot;Hong Kong S.A.R. of China&quot;~ 114.10000
    ),
    capital_longitude = case_when(
    country_name == &quot;Congo (Brazzaville)&quot; ~ 15.291944,
    country_name == &quot;Ivory Coast&quot; ~ 5.3,
    country_name == &quot;Gambia&quot; ~ -16.6,
    country_name == &quot;North Cyprus&quot; ~ 33.366667,
    country_name == &quot;Palestinian Territories&quot; ~ 34.45,
    country_name == &quot;Taiwan Province of China&quot;~ 121.516667,
    country_name == &quot;Somaliland region&quot;~ 44.05,
    country_name == &quot;Congo (Kinshasa)&quot;~ 15.316667,
    country_name == &quot;Hong Kong S.A.R. of China&quot;~ 22.20000)
    ) 
  

    
happy_location = 
bind_rows(happy_location_raw,happy_location_lost) %&gt;% 
  drop_na(capital_latitude,capital_longitude)

 list &lt;-which(rowSums(is.na(happy_location %&gt;% 
                              select(capital_latitude))) &gt; 0)
  data_all_na &lt;- happy_location[list,]</code></pre>
<p>Congo : -4.267778, 15.291944 Gambia: lat 13.466667, lon -16.6 North Cyprus : 35.183333 33.366667 Palestinian Territories : 31.516667, 34.45 Taiwan : 25.066667 121.516667 Somaliland region : 9.55, 44.05 Congo (Kinshasa) : -4.316667, 15.316667 hongkong : 114.10000,22.20000</p>
<div id="section-ym2771-plot-2interaction-relationship-plot-create" class="section level3">
<h3>191115 ym2771 plot 2:interaction relationship plot create</h3>
</div>
<div id="section-try-to-add-marker-for-variable" class="section level2">
<h2>try to add marker for variable</h2>
<pre class="r"><code>l &lt;- list(color = toRGB(&quot;grey&quot;), width = 0.5)
# specify map projection/options
g &lt;- list(
  showframe = FALSE,
  showcoastlines = FALSE,
  projection = list(type = &#39;Mercator&#39;)
)
## making map according to year
## problem unsolved: How to make it a variable?
global_happy_compare &lt;- function(i,variable){
  happy_yeari_value = happy_location %&gt;% 
    filter(year == i) %&gt;% 
    select(variable,everything())
  happy_yeari_value %&gt;%
  plot_geo(marker = list(color = toRGB(&quot;purple&quot;),
                       #opacity = 0.5,    #用了整个地图会一起透明
                       #size = 0.5,
                       line = list(color = toRGB(&quot;purple&quot;),
                                   width = 0.1))) %&gt;%  
  add_trace(
    z = ~life_ladder, color = ~life_ladder, colors = &#39;Blues&#39;,
    text = ~label,locations = ~code, marker = list(line = l)
  ) %&gt;%
    add_markers(x = ~capital_longitude,
              y = ~capital_latitude,
              sizes = c(.1, 1), #改了没变化，不知道怎么用
              size = ~happy_yeari_value[[1]]^3,
              hoverinfo = &quot;text&quot;,
              text = ~paste(&quot;&lt;b&gt;Happiness:&quot; , round(life_ladder,2),
                            &#39;&lt;/b&gt;&lt;br&gt;country: &#39;, country_name,
                            &#39;&lt;/b&gt;&lt;br&gt;&#39;,variable,&#39;: &#39;, round(happy_yeari_value[[1]],2)
                            ) ### how to specify the labels, what format?
              ) %&gt;%
  layout(geo = g) %&gt;% 
  colorbar(title = &#39;Happiness index&#39;)
}</code></pre>
<pre class="r"><code>global_happy_compare(2011,&quot;social_support&quot;)</code></pre>
<pre><code>## Warning: `line.width` does not currently support multiple values.</code></pre>
<div id="htmlwidget-444bbb5a4973c0044d27" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-444bbb5a4973c0044d27">{"x":{"visdat":{"10309297176d3":["function () ","plotlyVisDat"]},"cur_data":"10309297176d3","attrs":{"10309297176d3":{"marker":{"color":"rgba(160,32,240,1)","line":{"color":"rgba(160,32,240,1)","width":0.1}},"alpha_stroke":1,"sizes":[0.1,1],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","size":{},"hoverinfo":"text","text":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","geo":{"domain":{"x":[0,1],"y":[0,1]},"showframe":false,"showcoastlines":false,"projection":{"type":"Mercator"}},"scene":{"zaxis":{"title":"life_ladder"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"Happiness index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(247,251,255,1)"],["0.0416666666666667","rgba(239,246,252,1)"],["0.0833333333333333","rgba(230,240,250,1)"],["0.125","rgba(222,235,247,1)"],["0.166666666666667","rgba(214,230,244,1)"],["0.208333333333333","rgba(206,224,242,1)"],["0.25","rgba(198,219,239,1)"],["0.291666666666667","rgba(185,213,234,1)"],["0.333333333333333","rgba(172,208,230,1)"],["0.375","rgba(158,202,225,1)"],["0.416666666666667","rgba(142,193,221,1)"],["0.458333333333333","rgba(125,183,218,1)"],["0.5","rgba(107,174,214,1)"],["0.541666666666667","rgba(94,165,209,1)"],["0.583333333333333","rgba(81,155,203,1)"],["0.625","rgba(66,146,198,1)"],["0.666666666666667","rgba(57,135,192,1)"],["0.708333333333333","rgba(46,124,187,1)"],["0.75","rgba(33,113,181,1)"],["0.791666666666667","rgba(27,102,173,1)"],["0.833333333333333","rgba(19,91,164,1)"],["0.875","rgba(8,81,156,1)"],["0.916666666666667","rgba(9,70,139,1)"],["0.958333333333333","rgba(9,59,123,1)"],["1","rgba(8,48,107,1)"]],"showscale":true,"marker":{"color":"rgba(160,32,240,1)","line":{"colorbar":{"title":"","ticklen":2},"cmin":2.93622088432312,"cmax":7.78823184967041,"colorscale":[["0","rgba(247,251,255,1)"],["0.0416666666666667","rgba(239,246,252,1)"],["0.0833333333333333","rgba(230,240,250,1)"],["0.125","rgba(222,235,247,1)"],["0.166666666666667","rgba(214,230,244,1)"],["0.208333333333333","rgba(206,224,242,1)"],["0.25","rgba(198,219,239,1)"],["0.291666666666667","rgba(185,213,234,1)"],["0.333333333333333","rgba(172,208,230,1)"],["0.375","rgba(158,202,225,1)"],["0.416666666666667","rgba(142,193,221,1)"],["0.458333333333333","rgba(125,183,218,1)"],["0.5","rgba(107,174,214,1)"],["0.541666666666667","rgba(94,165,209,1)"],["0.583333333333333","rgba(81,155,203,1)"],["0.625","rgba(66,146,198,1)"],["0.666666666666667","rgba(57,135,192,1)"],["0.708333333333333","rgba(46,124,187,1)"],["0.75","rgba(33,113,181,1)"],["0.791666666666667","rgba(27,102,173,1)"],["0.833333333333333","rgba(19,91,164,1)"],["0.875","rgba(8,81,156,1)"],["0.916666666666667","rgba(9,70,139,1)"],["0.958333333333333","rgba(9,59,123,1)"],["1","rgba(8,48,107,1)"]],"showscale":false,"color":"rgba(190,190,190,1)","width":0.5}},"z":[3.83171916007996,5.86742162704468,5.31719446182251,5.5890007019043,6.77580547332764,4.26049137115479,7.40561628341675,7.47051286697388,4.68046951293945,4.82397603988647,4.98564910888672,5.22530794143677,7.11136388778687,3.87027955055237,5.77887439727783,4.99467086791992,3.51992106437683,7.03781652450562,3.87538242340088,4.78536748886108,3.70589423179626,4.16122531890869,4.43388509750366,7.42605352401733,3.67782640457153,4.39348220825195,6.52633476257324,5.03720760345459,6.46395254135132,3.83848595619202,7.22888851165771,5.38537263870239,6.68960857391357,6.33149099349976,7.78823184967041,4.36919355392456,5.39653539657593,5.79508829116821,4.17415857315063,4.74129486083984,5.48681974411011,7.35422515869141,6.9591851234436,4.25540065765381,4.20303058624268,6.62131214141846,5.60819959640503,5.37203979492188,5.74335384368896,4.04456949234009,4.84457397460938,4.96103143692017,4.9176025390625,4.63487148284912,5.17260837554932,4.76750707626343,4.72536611557007,7.00690412521362,7.43314790725708,6.05708646774292,5.37444639205933,6.26279354095459,5.53932762145996,5.73566293716431,4.40531015396118,4.85950183868408,6.37769937515259,4.92104911804199,4.70374965667725,4.9668116569519,5.18757152557373,4.89751482009888,5.43243741989136,7.10140037536621,4.89818000793457,4.38141536712646,3.94606256484985,5.78636741638184,4.66683292388916,6.15471839904785,4.78480434417725,5.47707319259644,6.90951538085938,5.7922625541687,5.03117370605469,5.22311687469482,5.08497285842896,4.97111177444458,3.80944466590881,7.56379795074463,7.19063806533813,5.38570547103882,4.5558295249939,6.85298204421997,5.26718616485596,7.24808073043823,5.6770806312561,5.89245748519897,4.99395656585693,5.64620494842529,5.21999788284302,6.59160423278809,5.0227575302124,5.38876628875732,4.09743595123291,6.69978952407837,3.83420157432556,4.81518650054932,4.50164365768433,6.56104183197021,5.94504833221436,6.035964012146,4.93051147460938,6.94659900665283,6.51824903488159,4.18056917190552,4.31445646286011,4.86709117889404,7.38223218917847,4.03788948059082,4.26267147064209,4.07356214523315,6.66360902786255,2.93622088432312,6.51874589920044,4.8764820098877,5.27194404602051,5.79175472259521,4.82600116729736,5.08313274383545,7.11870145797729,6.86924886703491,7.1151385307312,6.55404710769653,5.73874425888062,6.57978916168213,5.76734447479248,3.74625563621521,4.9991135597229,4.84564161300659,4.50982427597046,4.51696395874023,5.47401094436646,4.75121974945068,4.93057155609131,6.30891513824463],"text":["<b>Happiness: 3.83<\/b><br>Country : Afghanistan","<b>Happiness: 5.87<\/b><br>Country : Albania","<b>Happiness: 5.32<\/b><br>Country : Algeria","<b>Happiness: 5.59<\/b><br>Country : Angola","<b>Happiness: 6.78<\/b><br>Country : Argentina","<b>Happiness: 4.26<\/b><br>Country : Armenia","<b>Happiness: 7.41<\/b><br>Country : Australia","<b>Happiness: 7.47<\/b><br>Country : Austria","<b>Happiness: 4.68<\/b><br>Country : Azerbaijan","<b>Happiness: 4.82<\/b><br>Country : Bahrain","<b>Happiness: 4.99<\/b><br>Country : Bangladesh","<b>Happiness: 5.23<\/b><br>Country : Belarus","<b>Happiness: 7.11<\/b><br>Country : Belgium","<b>Happiness: 3.87<\/b><br>Country : Benin","<b>Happiness: 5.78<\/b><br>Country : Bolivia","<b>Happiness: 4.99<\/b><br>Country : Bosnia and Herzegovina","<b>Happiness: 3.52<\/b><br>Country : Botswana","<b>Happiness: 7.04<\/b><br>Country : Brazil","<b>Happiness: 3.88<\/b><br>Country : Bulgaria","<b>Happiness: 4.79<\/b><br>Country : Burkina Faso","<b>Happiness: 3.71<\/b><br>Country : Burundi","<b>Happiness: 4.16<\/b><br>Country : Cambodia","<b>Happiness: 4.43<\/b><br>Country : Cameroon","<b>Happiness: 7.43<\/b><br>Country : Canada","<b>Happiness: 3.68<\/b><br>Country : Central African Republic","<b>Happiness: 4.39<\/b><br>Country : Chad","<b>Happiness: 6.53<\/b><br>Country : Chile","<b>Happiness: 5.04<\/b><br>Country : China","<b>Happiness: 6.46<\/b><br>Country : Colombia","<b>Happiness: 3.84<\/b><br>Country : Comoros","<b>Happiness: 7.23<\/b><br>Country : Costa Rica","<b>Happiness: 5.39<\/b><br>Country : Croatia","<b>Happiness: 6.69<\/b><br>Country : Cyprus","<b>Happiness: 6.33<\/b><br>Country : Czech Republic","<b>Happiness: 7.79<\/b><br>Country : Denmark","<b>Happiness: 4.37<\/b><br>Country : Djibouti","<b>Happiness: 5.4<\/b><br>Country : Dominican Republic","<b>Happiness: 5.8<\/b><br>Country : Ecuador","<b>Happiness: 4.17<\/b><br>Country : Egypt","<b>Happiness: 4.74<\/b><br>Country : El Salvador","<b>Happiness: 5.49<\/b><br>Country : Estonia","<b>Happiness: 7.35<\/b><br>Country : Finland","<b>Happiness: 6.96<\/b><br>Country : France","<b>Happiness: 4.26<\/b><br>Country : Gabon","<b>Happiness: 4.2<\/b><br>Country : Georgia","<b>Happiness: 6.62<\/b><br>Country : Germany","<b>Happiness: 5.61<\/b><br>Country : Ghana","<b>Happiness: 5.37<\/b><br>Country : Greece","<b>Happiness: 5.74<\/b><br>Country : Guatemala","<b>Happiness: 4.04<\/b><br>Country : Guinea","<b>Happiness: 4.84<\/b><br>Country : Haiti","<b>Happiness: 4.96<\/b><br>Country : Honduras","<b>Happiness: 4.92<\/b><br>Country : Hungary","<b>Happiness: 4.63<\/b><br>Country : India","<b>Happiness: 5.17<\/b><br>Country : Indonesia","<b>Happiness: 4.77<\/b><br>Country : Iran","<b>Happiness: 4.73<\/b><br>Country : Iraq","<b>Happiness: 7.01<\/b><br>Country : Ireland","<b>Happiness: 7.43<\/b><br>Country : Israel","<b>Happiness: 6.06<\/b><br>Country : Italy","<b>Happiness: 5.37<\/b><br>Country : Jamaica","<b>Happiness: 6.26<\/b><br>Country : Japan","<b>Happiness: 5.54<\/b><br>Country : Jordan","<b>Happiness: 5.74<\/b><br>Country : Kazakhstan","<b>Happiness: 4.41<\/b><br>Country : Kenya","<b>Happiness: 4.86<\/b><br>Country : Kosovo","<b>Happiness: 6.38<\/b><br>Country : Kuwait","<b>Happiness: 4.92<\/b><br>Country : Kyrgyzstan","<b>Happiness: 4.7<\/b><br>Country : Laos","<b>Happiness: 4.97<\/b><br>Country : Latvia","<b>Happiness: 5.19<\/b><br>Country : Lebanon","<b>Happiness: 4.9<\/b><br>Country : Lesotho","<b>Happiness: 5.43<\/b><br>Country : Lithuania","<b>Happiness: 7.1<\/b><br>Country : Luxembourg","<b>Happiness: 4.9<\/b><br>Country : Macedonia","<b>Happiness: 4.38<\/b><br>Country : Madagascar","<b>Happiness: 3.95<\/b><br>Country : Malawi","<b>Happiness: 5.79<\/b><br>Country : Malaysia","<b>Happiness: 4.67<\/b><br>Country : Mali","<b>Happiness: 6.15<\/b><br>Country : Malta","<b>Happiness: 4.78<\/b><br>Country : Mauritania","<b>Happiness: 5.48<\/b><br>Country : Mauritius","<b>Happiness: 6.91<\/b><br>Country : Mexico","<b>Happiness: 5.79<\/b><br>Country : Moldova","<b>Happiness: 5.03<\/b><br>Country : Mongolia","<b>Happiness: 5.22<\/b><br>Country : Montenegro","<b>Happiness: 5.08<\/b><br>Country : Morocco","<b>Happiness: 4.97<\/b><br>Country : Mozambique","<b>Happiness: 3.81<\/b><br>Country : Nepal","<b>Happiness: 7.56<\/b><br>Country : Netherlands","<b>Happiness: 7.19<\/b><br>Country : New Zealand","<b>Happiness: 5.39<\/b><br>Country : Nicaragua","<b>Happiness: 4.56<\/b><br>Country : Niger","<b>Happiness: 6.85<\/b><br>Country : Oman","<b>Happiness: 5.27<\/b><br>Country : Pakistan","<b>Happiness: 7.25<\/b><br>Country : Panama","<b>Happiness: 5.68<\/b><br>Country : Paraguay","<b>Happiness: 5.89<\/b><br>Country : Peru","<b>Happiness: 4.99<\/b><br>Country : Philippines","<b>Happiness: 5.65<\/b><br>Country : Poland","<b>Happiness: 5.22<\/b><br>Country : Portugal","<b>Happiness: 6.59<\/b><br>Country : Qatar","<b>Happiness: 5.02<\/b><br>Country : Romania","<b>Happiness: 5.39<\/b><br>Country : Russia","<b>Happiness: 4.1<\/b><br>Country : Rwanda","<b>Happiness: 6.7<\/b><br>Country : Saudi Arabia","<b>Happiness: 3.83<\/b><br>Country : Senegal","<b>Happiness: 4.82<\/b><br>Country : Serbia","<b>Happiness: 4.5<\/b><br>Country : Sierra Leone","<b>Happiness: 6.56<\/b><br>Country : Singapore","<b>Happiness: 5.95<\/b><br>Country : Slovakia","<b>Happiness: 6.04<\/b><br>Country : Slovenia","<b>Happiness: 4.93<\/b><br>Country : South Africa","<b>Happiness: 6.95<\/b><br>Country : South Korea","<b>Happiness: 6.52<\/b><br>Country : Spain","<b>Happiness: 4.18<\/b><br>Country : Sri Lanka","<b>Happiness: 4.31<\/b><br>Country : Sudan","<b>Happiness: 4.87<\/b><br>Country : Swaziland","<b>Happiness: 7.38<\/b><br>Country : Sweden","<b>Happiness: 4.04<\/b><br>Country : Syria","<b>Happiness: 4.26<\/b><br>Country : Tajikistan","<b>Happiness: 4.07<\/b><br>Country : Tanzania","<b>Happiness: 6.66<\/b><br>Country : Thailand","<b>Happiness: 2.94<\/b><br>Country : Togo","<b>Happiness: 6.52<\/b><br>Country : Trinidad and Tobago","<b>Happiness: 4.88<\/b><br>Country : Tunisia","<b>Happiness: 5.27<\/b><br>Country : Turkey","<b>Happiness: 5.79<\/b><br>Country : Turkmenistan","<b>Happiness: 4.83<\/b><br>Country : Uganda","<b>Happiness: 5.08<\/b><br>Country : Ukraine","<b>Happiness: 7.12<\/b><br>Country : United Arab Emirates","<b>Happiness: 6.87<\/b><br>Country : United Kingdom","<b>Happiness: 7.12<\/b><br>Country : United States","<b>Happiness: 6.55<\/b><br>Country : Uruguay","<b>Happiness: 5.74<\/b><br>Country : Uzbekistan","<b>Happiness: 6.58<\/b><br>Country : Venezuela","<b>Happiness: 5.77<\/b><br>Country : Vietnam","<b>Happiness: 3.75<\/b><br>Country : Yemen","<b>Happiness: 5<\/b><br>Country : Zambia","<b>Happiness: 4.85<\/b><br>Country : Zimbabwe","<b>Happiness: 4.51<\/b><br>Country : Congo (Brazzaville)","<b>Happiness: 4.52<\/b><br>Country : Congo (Kinshasa)","<b>Happiness: 5.47<\/b><br>Country : Hong Kong S.A.R. of China","<b>Happiness: 4.75<\/b><br>Country : Palestinian Territories","<b>Happiness: 4.93<\/b><br>Country : Somaliland region","<b>Happiness: 6.31<\/b><br>Country : Taiwan Province of China"],"locations":["AFG","ALB","DZA","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","BDI","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","COM","CRI","HRV","CYP","CZE","DNK","DJI","DOM","ECU","EGY","SLV","EST","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HUN","IND","IDN","IRN","IRQ","IRL","ISR","ITA","JAM","JPN","JOR","KAZ","KEN","XKX","KWT","KGZ","LAO","LVA","LBN","LSO","LTU","LUX","MKD","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","NPL","NLD","NZL","NIC","NER","OMN","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","SDN","SWZ","SWE","SYR","TJK","TZA","THA","TGO","TTO","TUN","TUR","TKM","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE","COG","COD","HKG","PSE","SOM","TWN"],"type":"choropleth","geo":"geo","frame":null},{"marker":{"color":"rgba(160,32,240,1)","size":[21.2964981953882,50.7540511091627,60.084102347713,44.8012896950628,77.0604371342832,42.067396512046,97.0846021030729,90.8589435660011,45.1294518916335,81.5826961350099,29.3984284862832,82.0800697342673,88.9600788849149,18.0539809529552,61.3758133929753,45.1371231742397,70.4383558597872,83.6617692200183,70.4922078499709,42.7264635296577,14.7167363951601,43.6330164681436,47.1713334040234,85.0251212627962,13.0134758617563,61.7867108598061,61.8336581303409,55.6985002572557,80.6724448816936,44.6050178544577,77.7636329311092,56.1742479970683,66.8969037583593,82.9776496495993,95.6173162037592,32.4339828749207,73.1341549112594,61.6284446955806,49.7240994437051,46.0911539239892,81.7904549922879,89.1961706279388,84.9280165937576,34.8641335511444,19.8768163494835,91.6799342881256,44.9890665592493,68.5887087514553,52.2630570238767,28.5336437622032,25.3518134520697,51.8404696852909,78.1471476320804,24.0023331479591,63.0216131317945,26.8477359411087,49.2780416439978,100,77.9175293510565,82.9275647316068,69.2457737857131,83.774625492347,74.4651792469465,80.8734126973561,67.4615141342132,50.6969632152988,75.3867149683733,77.6109764709975,40.0008282663548,65.2965588923891,46.3526253875209,62.8409235824738,82.4566440604715,88.2127419729415,55.1701666595067,61.6985490440056,30.0937748458016,52.6706083709414,57.2540417089786,85.2711027205625,49.1987863310565,58.1588193440708,62.8366164462454,72.5301506314821,91.8535185217023,61.5447528515546,64.7447319367445,61.543363268063,47.6581188287366,89.337624421963,93.4067157811127,58.1649181647714,61.5505608545149,null,20.4078242117458,74.0903635001475,72.4707189889903,50.218333858984,55.9931416962838,80.7775856943046,69.545881127801,69.8499064628218,49.5909788888035,75.7361814787922,25.6234675430664,63.9715834868693,28.95744206897,53.1655730942243,54.673355926509,80.75204684424,83.9224329840128,87.4545390842294,69.9271811831247,59.8632809740467,90.9351906608637,66.5335835672662,61.5754603807628,65.5275496116195,84.7348175167226,26.1968053841496,49.2763193835354,75.5301194487361,75.9536612890868,10,71.0599713328728,43.5373423571193,40.1467116244412,96.3589342974331,75.3494828819504,70.3129075845179,75.2608988440184,92.0747586718508,85.0341766183433,77.5821680009554,85.634887002181,87.3134724132098,79.1018829337032,36.1506104446023,71.3230772725789,71.4724933226562,32.9321376057565,48.1456681026772,67.4087098169962,49.2920918393048,55.8446407807095,70.9894866113199],"sizemode":"area","line":{"color":"rgba(160,32,240,1)","width":0.1}},"type":"scattergeo","mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["<b>Happiness: 3.83 <\/b><br>country:  Afghanistan <\/b><br> social_support :  0.52","<b>Happiness: 5.87 <\/b><br>country:  Albania <\/b><br> social_support :  0.76","<b>Happiness: 5.32 <\/b><br>country:  Algeria <\/b><br> social_support :  0.81","<b>Happiness: 5.59 <\/b><br>country:  Angola <\/b><br> social_support :  0.72","<b>Happiness: 6.78 <\/b><br>country:  Argentina <\/b><br> social_support :  0.89","<b>Happiness: 4.26 <\/b><br>country:  Armenia <\/b><br> social_support :  0.71","<b>Happiness: 7.41 <\/b><br>country:  Australia <\/b><br> social_support :  0.97","<b>Happiness: 7.47 <\/b><br>country:  Austria <\/b><br> social_support :  0.94","<b>Happiness: 4.68 <\/b><br>country:  Azerbaijan <\/b><br> social_support :  0.73","<b>Happiness: 4.82 <\/b><br>country:  Bahrain <\/b><br> social_support :  0.91","<b>Happiness: 4.99 <\/b><br>country:  Bangladesh <\/b><br> social_support :  0.61","<b>Happiness: 5.23 <\/b><br>country:  Belarus <\/b><br> social_support :  0.91","<b>Happiness: 7.11 <\/b><br>country:  Belgium <\/b><br> social_support :  0.94","<b>Happiness: 3.87 <\/b><br>country:  Benin <\/b><br> social_support :  0.48","<b>Happiness: 5.78 <\/b><br>country:  Bolivia <\/b><br> social_support :  0.82","<b>Happiness: 4.99 <\/b><br>country:  Bosnia and Herzegovina <\/b><br> social_support :  0.73","<b>Happiness: 3.52 <\/b><br>country:  Botswana <\/b><br> social_support :  0.86","<b>Happiness: 7.04 <\/b><br>country:  Brazil <\/b><br> social_support :  0.92","<b>Happiness: 3.88 <\/b><br>country:  Bulgaria <\/b><br> social_support :  0.86","<b>Happiness: 4.79 <\/b><br>country:  Burkina Faso <\/b><br> social_support :  0.71","<b>Happiness: 3.71 <\/b><br>country:  Burundi <\/b><br> social_support :  0.42","<b>Happiness: 4.16 <\/b><br>country:  Cambodia <\/b><br> social_support :  0.72","<b>Happiness: 4.43 <\/b><br>country:  Cameroon <\/b><br> social_support :  0.74","<b>Happiness: 7.43 <\/b><br>country:  Canada <\/b><br> social_support :  0.92","<b>Happiness: 3.68 <\/b><br>country:  Central African Republic <\/b><br> social_support :  0.39","<b>Happiness: 4.39 <\/b><br>country:  Chad <\/b><br> social_support :  0.82","<b>Happiness: 6.53 <\/b><br>country:  Chile <\/b><br> social_support :  0.82","<b>Happiness: 5.04 <\/b><br>country:  China <\/b><br> social_support :  0.79","<b>Happiness: 6.46 <\/b><br>country:  Colombia <\/b><br> social_support :  0.9","<b>Happiness: 3.84 <\/b><br>country:  Comoros <\/b><br> social_support :  0.72","<b>Happiness: 7.23 <\/b><br>country:  Costa Rica <\/b><br> social_support :  0.89","<b>Happiness: 5.39 <\/b><br>country:  Croatia <\/b><br> social_support :  0.79","<b>Happiness: 6.69 <\/b><br>country:  Cyprus <\/b><br> social_support :  0.84","<b>Happiness: 6.33 <\/b><br>country:  Czech Republic <\/b><br> social_support :  0.91","<b>Happiness: 7.79 <\/b><br>country:  Denmark <\/b><br> social_support :  0.96","<b>Happiness: 4.37 <\/b><br>country:  Djibouti <\/b><br> social_support :  0.63","<b>Happiness: 5.4 <\/b><br>country:  Dominican Republic <\/b><br> social_support :  0.87","<b>Happiness: 5.8 <\/b><br>country:  Ecuador <\/b><br> social_support :  0.82","<b>Happiness: 4.17 <\/b><br>country:  Egypt <\/b><br> social_support :  0.75","<b>Happiness: 4.74 <\/b><br>country:  El Salvador <\/b><br> social_support :  0.73","<b>Happiness: 5.49 <\/b><br>country:  Estonia <\/b><br> social_support :  0.91","<b>Happiness: 7.35 <\/b><br>country:  Finland <\/b><br> social_support :  0.94","<b>Happiness: 6.96 <\/b><br>country:  France <\/b><br> social_support :  0.92","<b>Happiness: 4.26 <\/b><br>country:  Gabon <\/b><br> social_support :  0.65","<b>Happiness: 4.2 <\/b><br>country:  Georgia <\/b><br> social_support :  0.5","<b>Happiness: 6.62 <\/b><br>country:  Germany <\/b><br> social_support :  0.95","<b>Happiness: 5.61 <\/b><br>country:  Ghana <\/b><br> social_support :  0.72","<b>Happiness: 5.37 <\/b><br>country:  Greece <\/b><br> social_support :  0.85","<b>Happiness: 5.74 <\/b><br>country:  Guatemala <\/b><br> social_support :  0.77","<b>Happiness: 4.04 <\/b><br>country:  Guinea <\/b><br> social_support :  0.6","<b>Happiness: 4.84 <\/b><br>country:  Haiti <\/b><br> social_support :  0.57","<b>Happiness: 4.96 <\/b><br>country:  Honduras <\/b><br> social_support :  0.77","<b>Happiness: 4.92 <\/b><br>country:  Hungary <\/b><br> social_support :  0.89","<b>Happiness: 4.63 <\/b><br>country:  India <\/b><br> social_support :  0.55","<b>Happiness: 5.17 <\/b><br>country:  Indonesia <\/b><br> social_support :  0.82","<b>Happiness: 4.77 <\/b><br>country:  Iran <\/b><br> social_support :  0.58","<b>Happiness: 4.73 <\/b><br>country:  Iraq <\/b><br> social_support :  0.75","<b>Happiness: 7.01 <\/b><br>country:  Ireland <\/b><br> social_support :  0.98","<b>Happiness: 7.43 <\/b><br>country:  Israel <\/b><br> social_support :  0.89","<b>Happiness: 6.06 <\/b><br>country:  Italy <\/b><br> social_support :  0.91","<b>Happiness: 5.37 <\/b><br>country:  Jamaica <\/b><br> social_support :  0.85","<b>Happiness: 6.26 <\/b><br>country:  Japan <\/b><br> social_support :  0.92","<b>Happiness: 5.54 <\/b><br>country:  Jordan <\/b><br> social_support :  0.88","<b>Happiness: 5.74 <\/b><br>country:  Kazakhstan <\/b><br> social_support :  0.9","<b>Happiness: 4.41 <\/b><br>country:  Kenya <\/b><br> social_support :  0.85","<b>Happiness: 4.86 <\/b><br>country:  Kosovo <\/b><br> social_support :  0.76","<b>Happiness: 6.38 <\/b><br>country:  Kuwait <\/b><br> social_support :  0.88","<b>Happiness: 4.92 <\/b><br>country:  Kyrgyzstan <\/b><br> social_support :  0.89","<b>Happiness: 4.7 <\/b><br>country:  Laos <\/b><br> social_support :  0.69","<b>Happiness: 4.97 <\/b><br>country:  Latvia <\/b><br> social_support :  0.84","<b>Happiness: 5.19 <\/b><br>country:  Lebanon <\/b><br> social_support :  0.73","<b>Happiness: 4.9 <\/b><br>country:  Lesotho <\/b><br> social_support :  0.82","<b>Happiness: 5.43 <\/b><br>country:  Lithuania <\/b><br> social_support :  0.91","<b>Happiness: 7.1 <\/b><br>country:  Luxembourg <\/b><br> social_support :  0.93","<b>Happiness: 4.9 <\/b><br>country:  Macedonia <\/b><br> social_support :  0.78","<b>Happiness: 4.38 <\/b><br>country:  Madagascar <\/b><br> social_support :  0.82","<b>Happiness: 3.95 <\/b><br>country:  Malawi <\/b><br> social_support :  0.61","<b>Happiness: 5.79 <\/b><br>country:  Malaysia <\/b><br> social_support :  0.77","<b>Happiness: 4.67 <\/b><br>country:  Mali <\/b><br> social_support :  0.8","<b>Happiness: 6.15 <\/b><br>country:  Malta <\/b><br> social_support :  0.92","<b>Happiness: 4.78 <\/b><br>country:  Mauritania <\/b><br> social_support :  0.75","<b>Happiness: 5.48 <\/b><br>country:  Mauritius <\/b><br> social_support :  0.8","<b>Happiness: 6.91 <\/b><br>country:  Mexico <\/b><br> social_support :  0.82","<b>Happiness: 5.79 <\/b><br>country:  Moldova <\/b><br> social_support :  0.87","<b>Happiness: 5.03 <\/b><br>country:  Mongolia <\/b><br> social_support :  0.95","<b>Happiness: 5.22 <\/b><br>country:  Montenegro <\/b><br> social_support :  0.82","<b>Happiness: 5.08 <\/b><br>country:  Morocco <\/b><br> social_support :  0.83","<b>Happiness: 4.97 <\/b><br>country:  Mozambique <\/b><br> social_support :  0.82","<b>Happiness: 3.81 <\/b><br>country:  Nepal <\/b><br> social_support :  0.74","<b>Happiness: 7.56 <\/b><br>country:  Netherlands <\/b><br> social_support :  0.94","<b>Happiness: 7.19 <\/b><br>country:  New Zealand <\/b><br> social_support :  0.95","<b>Happiness: 5.39 <\/b><br>country:  Nicaragua <\/b><br> social_support :  0.8","<b>Happiness: 4.56 <\/b><br>country:  Niger <\/b><br> social_support :  0.82","<b>Happiness: 6.85 <\/b><br>country:  Oman <\/b><br> social_support :  NA","<b>Happiness: 5.27 <\/b><br>country:  Pakistan <\/b><br> social_support :  0.51","<b>Happiness: 7.25 <\/b><br>country:  Panama <\/b><br> social_support :  0.88","<b>Happiness: 5.68 <\/b><br>country:  Paraguay <\/b><br> social_support :  0.87","<b>Happiness: 5.89 <\/b><br>country:  Peru <\/b><br> social_support :  0.76","<b>Happiness: 4.99 <\/b><br>country:  Philippines <\/b><br> social_support :  0.79","<b>Happiness: 5.65 <\/b><br>country:  Poland <\/b><br> social_support :  0.9","<b>Happiness: 5.22 <\/b><br>country:  Portugal <\/b><br> social_support :  0.86","<b>Happiness: 6.59 <\/b><br>country:  Qatar <\/b><br> social_support :  0.86","<b>Happiness: 5.02 <\/b><br>country:  Romania <\/b><br> social_support :  0.75","<b>Happiness: 5.39 <\/b><br>country:  Russia <\/b><br> social_support :  0.88","<b>Happiness: 4.1 <\/b><br>country:  Rwanda <\/b><br> social_support :  0.57","<b>Happiness: 6.7 <\/b><br>country:  Saudi Arabia <\/b><br> social_support :  0.83","<b>Happiness: 3.83 <\/b><br>country:  Senegal <\/b><br> social_support :  0.6","<b>Happiness: 4.82 <\/b><br>country:  Serbia <\/b><br> social_support :  0.77","<b>Happiness: 4.5 <\/b><br>country:  Sierra Leone <\/b><br> social_support :  0.78","<b>Happiness: 6.56 <\/b><br>country:  Singapore <\/b><br> social_support :  0.9","<b>Happiness: 5.95 <\/b><br>country:  Slovakia <\/b><br> social_support :  0.92","<b>Happiness: 6.04 <\/b><br>country:  Slovenia <\/b><br> social_support :  0.93","<b>Happiness: 4.93 <\/b><br>country:  South Africa <\/b><br> social_support :  0.86","<b>Happiness: 6.95 <\/b><br>country:  South Korea <\/b><br> social_support :  0.81","<b>Happiness: 6.52 <\/b><br>country:  Spain <\/b><br> social_support :  0.94","<b>Happiness: 4.18 <\/b><br>country:  Sri Lanka <\/b><br> social_support :  0.84","<b>Happiness: 4.31 <\/b><br>country:  Sudan <\/b><br> social_support :  0.82","<b>Happiness: 4.87 <\/b><br>country:  Swaziland <\/b><br> social_support :  0.84","<b>Happiness: 7.38 <\/b><br>country:  Sweden <\/b><br> social_support :  0.92","<b>Happiness: 4.04 <\/b><br>country:  Syria <\/b><br> social_support :  0.58","<b>Happiness: 4.26 <\/b><br>country:  Tajikistan <\/b><br> social_support :  0.75","<b>Happiness: 4.07 <\/b><br>country:  Tanzania <\/b><br> social_support :  0.88","<b>Happiness: 6.66 <\/b><br>country:  Thailand <\/b><br> social_support :  0.88","<b>Happiness: 2.94 <\/b><br>country:  Togo <\/b><br> social_support :  0.3","<b>Happiness: 6.52 <\/b><br>country:  Trinidad and Tobago <\/b><br> social_support :  0.86","<b>Happiness: 4.88 <\/b><br>country:  Tunisia <\/b><br> social_support :  0.71","<b>Happiness: 5.27 <\/b><br>country:  Turkey <\/b><br> social_support :  0.69","<b>Happiness: 5.79 <\/b><br>country:  Turkmenistan <\/b><br> social_support :  0.96","<b>Happiness: 4.83 <\/b><br>country:  Uganda <\/b><br> social_support :  0.88","<b>Happiness: 5.08 <\/b><br>country:  Ukraine <\/b><br> social_support :  0.86","<b>Happiness: 7.12 <\/b><br>country:  United Arab Emirates <\/b><br> social_support :  0.88","<b>Happiness: 6.87 <\/b><br>country:  United Kingdom <\/b><br> social_support :  0.95","<b>Happiness: 7.12 <\/b><br>country:  United States <\/b><br> social_support :  0.92","<b>Happiness: 6.55 <\/b><br>country:  Uruguay <\/b><br> social_support :  0.89","<b>Happiness: 5.74 <\/b><br>country:  Uzbekistan <\/b><br> social_support :  0.92","<b>Happiness: 6.58 <\/b><br>country:  Venezuela <\/b><br> social_support :  0.93","<b>Happiness: 5.77 <\/b><br>country:  Vietnam <\/b><br> social_support :  0.9","<b>Happiness: 3.75 <\/b><br>country:  Yemen <\/b><br> social_support :  0.66","<b>Happiness: 5 <\/b><br>country:  Zambia <\/b><br> social_support :  0.86","<b>Happiness: 4.85 <\/b><br>country:  Zimbabwe <\/b><br> social_support :  0.86","<b>Happiness: 4.51 <\/b><br>country:  Congo (Brazzaville) <\/b><br> social_support :  0.64","<b>Happiness: 4.52 <\/b><br>country:  Congo (Kinshasa) <\/b><br> social_support :  0.74","<b>Happiness: 5.47 <\/b><br>country:  Hong Kong S.A.R. of China <\/b><br> social_support :  0.85","<b>Happiness: 4.75 <\/b><br>country:  Palestinian Territories <\/b><br> social_support :  0.75","<b>Happiness: 4.93 <\/b><br>country:  Somaliland region <\/b><br> social_support :  0.79","<b>Happiness: 6.31 <\/b><br>country:  Taiwan Province of China <\/b><br> social_support :  0.86"],"textfont":{"size":[21.2964981953882,50.7540511091627,60.084102347713,44.8012896950628,77.0604371342832,42.067396512046,97.0846021030729,90.8589435660011,45.1294518916335,81.5826961350099,29.3984284862832,82.0800697342673,88.9600788849149,18.0539809529552,61.3758133929753,45.1371231742397,70.4383558597872,83.6617692200183,70.4922078499709,42.7264635296577,14.7167363951601,43.6330164681436,47.1713334040234,85.0251212627962,13.0134758617563,61.7867108598061,61.8336581303409,55.6985002572557,80.6724448816936,44.6050178544577,77.7636329311092,56.1742479970683,66.8969037583593,82.9776496495993,95.6173162037592,32.4339828749207,73.1341549112594,61.6284446955806,49.7240994437051,46.0911539239892,81.7904549922879,89.1961706279388,84.9280165937576,34.8641335511444,19.8768163494835,91.6799342881256,44.9890665592493,68.5887087514553,52.2630570238767,28.5336437622032,25.3518134520697,51.8404696852909,78.1471476320804,24.0023331479591,63.0216131317945,26.8477359411087,49.2780416439978,100,77.9175293510565,82.9275647316068,69.2457737857131,83.774625492347,74.4651792469465,80.8734126973561,67.4615141342132,50.6969632152988,75.3867149683733,77.6109764709975,40.0008282663548,65.2965588923891,46.3526253875209,62.8409235824738,82.4566440604715,88.2127419729415,55.1701666595067,61.6985490440056,30.0937748458016,52.6706083709414,57.2540417089786,85.2711027205625,49.1987863310565,58.1588193440708,62.8366164462454,72.5301506314821,91.8535185217023,61.5447528515546,64.7447319367445,61.543363268063,47.6581188287366,89.337624421963,93.4067157811127,58.1649181647714,61.5505608545149,null,20.4078242117458,74.0903635001475,72.4707189889903,50.218333858984,55.9931416962838,80.7775856943046,69.545881127801,69.8499064628218,49.5909788888035,75.7361814787922,25.6234675430664,63.9715834868693,28.95744206897,53.1655730942243,54.673355926509,80.75204684424,83.9224329840128,87.4545390842294,69.9271811831247,59.8632809740467,90.9351906608637,66.5335835672662,61.5754603807628,65.5275496116195,84.7348175167226,26.1968053841496,49.2763193835354,75.5301194487361,75.9536612890868,10,71.0599713328728,43.5373423571193,40.1467116244412,96.3589342974331,75.3494828819504,70.3129075845179,75.2608988440184,92.0747586718508,85.0341766183433,77.5821680009554,85.634887002181,87.3134724132098,79.1018829337032,36.1506104446023,71.3230772725789,71.4724933226562,32.9321376057565,48.1456681026772,67.4087098169962,49.2920918393048,55.8446407807095,70.9894866113199]},"line":{"color":"rgba(255,127,14,1)"},"geo":"geo","lat":[34.5166666666667,41.3166666666667,36.75,-8.83333333333333,-34.5833333333333,40.1666666666667,-35.2666666666667,48.2,40.3833333333333,26.2333333333333,23.7166666666667,53.9,50.8333333333333,6.48333333333333,-16.5,43.8666666666667,-24.6333333333333,-15.7833333333333,42.6833333333333,12.3666666666667,-3.36666666666667,11.55,3.86666666666667,45.4166666666667,4.36666666666667,12.1,-33.45,39.9166666666667,4.6,-11.7,9.93333333333333,45.8,35.1666666666667,50.0833333333333,55.6666666666667,11.5833333333333,18.4666666666667,-0.216666666666667,30.05,13.7,59.4333333333333,60.1666666666667,48.8666666666667,0.383333333333333,41.6833333333333,52.5166666666667,5.55,37.9833333333333,14.6166666666667,9.5,18.5333333333333,14.1,47.5,28.6,-6.16666666666667,35.7,33.3333333333333,53.3166666666667,31.7666666666667,41.9,18,35.6833333333333,31.95,51.1666666666667,-1.28333333333333,42.6666666666667,29.3666666666667,42.8666666666667,17.9666666666667,56.95,33.8666666666667,-29.3166666666667,54.6833333333333,49.6,42,-18.9166666666667,-13.9666666666667,3.16666666666667,12.65,35.8833333333333,18.0666666666667,-20.15,19.4333333333333,47,47.9166666666667,42.4333333333333,34.0166666666667,-25.95,27.7166666666667,52.35,-41.3,12.1333333333333,13.5166666666667,23.6166666666667,33.6833333333333,8.96666666666667,-25.2666666666667,-12.05,14.6,52.25,38.7166666666667,25.2833333333333,44.4333333333333,55.75,-1.95,24.65,14.7333333333333,44.8333333333333,8.48333333333333,1.28333333333333,48.15,46.05,-25.7,37.55,40.4,6.91666666666667,15.6,-26.3166666666667,59.3333333333333,33.5,38.55,-6.8,13.75,6.11666666666667,10.65,36.8,39.9333333333333,37.95,0.316666666666667,50.4333333333333,24.4666666666667,51.5,38.883333,-34.85,41.3166666666667,10.4833333333333,21.0333333333333,15.35,-15.4166666666667,-17.8166666666667,-4.267778,-4.316667,114.1,31.516667,9.55,25.066667],"lon":[69.183333,19.816667,3.05,13.216667,-58.666667,44.5,149.133333,16.366667,49.866667,50.566667,90.4,27.566667,4.333333,2.616667,-68.15,18.416667,25.9,-47.916667,23.316667,-1.516667,29.35,104.916667,11.516667,-75.7,18.583333,15.033333,-70.666667,116.383333,-74.083333,43.233333,-84.083333,16,33.366667,14.466667,12.583333,43.15,-69.9,-78.5,31.25,-89.2,24.716667,24.933333,2.333333,9.45,44.833333,13.4,-0.216667,23.733333,-90.516667,-13.7,-72.333333,-87.216667,19.083333,77.2,106.816667,51.416667,44.4,-6.233333,35.233333,12.483333,-76.8,139.75,35.933333,71.416667,36.816667,21.166667,47.966667,74.6,102.6,24.1,35.5,27.483333,25.316667,6.116667,21.433333,47.516667,33.783333,101.7,-8,14.5,-15.966667,57.483333,-99.133333,28.85,106.916667,19.266667,-6.816667,32.583333,85.316667,4.916667,174.783333,-86.25,2.116667,58.583333,73.05,-79.533333,-57.666667,-77.05,120.966667,21,-9.133333,51.533333,26.1,37.6,30.05,46.7,-17.633333,20.5,-13.233333,103.85,17.116667,14.516667,28.216667,126.983333,-3.683333,79.833333,32.533333,31.133333,18.05,36.3,68.766667,39.283333,100.516667,1.216667,-61.516667,10.183333,32.866667,58.383333,32.55,30.516667,54.366667,-0.083333,-77,-56.166667,69.25,-66.866667,105.85,44.2,28.283333,31.033333,15.291944,15.316667,22.2,34.45,44.05,121.516667],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="section-ym2771-add-shiny-on-plot-2" class="section level3">
<h3>191116 ym2771 Add shiny on plot 2</h3>
<pre class="r"><code>ui &lt;- shinyUI(fluidPage(
  titlePanel(&quot;relationship plot&quot;),
  sidebarPanel(
    selectInput(&#39;year&#39;, &#39;Year&#39;, sort(unique(as.numeric(happy$year))),
    selected = &quot;2018&quot;),
    selectInput(&#39;variable&#39;, &#39;Predictor&#39;, names(happy)[4:12],
    selected = &quot;social_support&quot;)),
  mainPanel(
    plotlyOutput(&quot;Plot1&quot;)
  )
))


## instead with world map 

server &lt;- shinyServer(function(input, output) {

  output$Plot1 &lt;- renderPlotly({

    ##plot function
    p &lt;- global_happy_compare(as.numeric(input$year),as.character(input$variable)) 
    ## When having 2 data input, we need to put it together? how could we use it separatly?
    layout(p)
  })
})
shinyApp(ui, server)</code></pre>
<iframe data-deferred-src="app0d9d304292d4dd5d47807065b178285e/?w=&amp;__subapp__=1" width="100%" height="400" class="shiny-frame shiny-frame-deferred"></iframe>
</div>
</div>
<div id="section-bar-plot-of-top-15-countries" class="section level1">
<h1>Bar plot of Top 15 countries</h1>
<pre class="r"><code>global_happy_rank &lt;- 
  function(i,variable){
  happy_yeari_value = happy_location %&gt;% 
    filter(year == i) %&gt;% 
    select(variable,everything())
  happy_yeari_value %&gt;%
  mutate(rank = rank(-.[[1]])) %&gt;% 
  filter(rank &lt;= 15) %&gt;% 
  mutate(country_name =
           fct_reorder(country_name,-.[[1]])) %&gt;% 
  plot_ly(
  x = ~country_name,
  y = ~.[[1]],
  color = ~country_name,
  type = &quot;bar&quot;) 
}

global_happy_rank(2018,&quot;social_support&quot;)</code></pre>
<pre><code>## Warning in RColorBrewer::brewer.pal(N, &quot;Set2&quot;): n too large, allowed maximum for palette Set2 is 8
## Returning the palette you asked for with that many colors

## Warning in RColorBrewer::brewer.pal(N, &quot;Set2&quot;): n too large, allowed maximum for palette Set2 is 8
## Returning the palette you asked for with that many colors</code></pre>
<div id="htmlwidget-1757acb7c01b44935064" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1757acb7c01b44935064">{"x":{"visdat":{"103096440a2c7":["function () ","plotlyVisDat"]},"cur_data":"103096440a2c7","attrs":{"103096440a2c7":{"x":{},"y":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"country_name","type":"category","categoryorder":"array","categoryarray":["Turkmenistan","Norway","Finland","Denmark","New Zealand","Mongolia","Slovenia","Australia","Netherlands","Ireland","Kazakhstan","Estonia","Malta","Sweden","Switzerland"]},"yaxis":{"domain":[0,1],"automargin":true,"title":".[[1]]"},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["Turkmenistan"],"y":[0.984488964080811],"type":"bar","name":"Turkmenistan","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Norway"],"y":[0.965961933135986],"type":"bar","name":"Norway","marker":{"color":"rgba(193,172,131,1)","line":{"color":"rgba(193,172,131,1)"}},"textfont":{"color":"rgba(193,172,131,1)"},"error_y":{"color":"rgba(193,172,131,1)"},"error_x":{"color":"rgba(193,172,131,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Finland"],"y":[0.962155044078827],"type":"bar","name":"Finland","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Denmark"],"y":[0.95821887254715],"type":"bar","name":"Denmark","marker":{"color":"rgba(207,151,151,1)","line":{"color":"rgba(207,151,151,1)"}},"textfont":{"color":"rgba(207,151,151,1)"},"error_y":{"color":"rgba(207,151,151,1)"},"error_x":{"color":"rgba(207,151,151,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["New Zealand"],"y":[0.953862726688385],"type":"bar","name":"New Zealand","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Mongolia"],"y":[0.941514134407043],"type":"bar","name":"Mongolia","marker":{"color":"rgba(190,151,199,1)","line":{"color":"rgba(190,151,199,1)"}},"textfont":{"color":"rgba(190,151,199,1)"},"error_y":{"color":"rgba(190,151,199,1)"},"error_x":{"color":"rgba(190,151,199,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Slovenia"],"y":[0.940971195697784],"type":"bar","name":"Slovenia","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Australia"],"y":[0.940137267112732],"type":"bar","name":"Australia","marker":{"color":"rgba(205,181,144,1)","line":{"color":"rgba(205,181,144,1)"}},"textfont":{"color":"rgba(205,181,144,1)"},"error_y":{"color":"rgba(205,181,144,1)"},"error_x":{"color":"rgba(205,181,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Netherlands"],"y":[0.939443171024323],"type":"bar","name":"Netherlands","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Ireland"],"y":[0.937862396240234],"type":"bar","name":"Ireland","marker":{"color":"rgba(213,217,68,1)","line":{"color":"rgba(213,217,68,1)"}},"textfont":{"color":"rgba(213,217,68,1)"},"error_y":{"color":"rgba(213,217,68,1)"},"error_x":{"color":"rgba(213,217,68,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Kazakhstan"],"y":[0.936656713485718],"type":"bar","name":"Kazakhstan","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Estonia"],"y":[0.932693779468536],"type":"bar","name":"Estonia","marker":{"color":"rgba(244,206,105,1)","line":{"color":"rgba(244,206,105,1)"}},"textfont":{"color":"rgba(244,206,105,1)"},"error_y":{"color":"rgba(244,206,105,1)"},"error_x":{"color":"rgba(244,206,105,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Malta"],"y":[0.931541502475739],"type":"bar","name":"Malta","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Sweden"],"y":[0.930679559707642],"type":"bar","name":"Sweden","marker":{"color":"rgba(205,187,164,1)","line":{"color":"rgba(205,187,164,1)"}},"textfont":{"color":"rgba(205,187,164,1)"},"error_y":{"color":"rgba(205,187,164,1)"},"error_x":{"color":"rgba(205,187,164,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Switzerland"],"y":[0.930290997028351],"type":"bar","name":"Switzerland","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="section-try-to-add-marker-for-variable-1" class="section level2">
<h2>try to add marker for variable</h2>
<pre class="r"><code>l &lt;- list(color = toRGB(&quot;grey&quot;), width = 0.5)
# specify map projection/options
g &lt;- list(
  showframe = FALSE,
  showcoastlines = FALSE,
  projection = list(type = &#39;Mercator&#39;)
)


## making map according to year
## problem unsolved: How to make it a variable?
global_happy_points &lt;- function(i,variable){
 happy_yeari_value = happy_location %&gt;% 
    filter(year == i) %&gt;% 
    select(variable,everything())
  
  
gaotong = happy_yeari_value %&gt;% 
          drop_na(variable) %&gt;% 
          pull(variable)
  
cut_point = 
  happy_yeari_value %&gt;% 
    mutate(
    cut_point = round(quantile(gaotong)[4],3)) %&gt;% 
  distinct(cut_point) %&gt;% 
  pull(cut_point)

max = 
  happy_yeari_value %&gt;% 
    mutate(
    max = round(max(gaotong),3)) %&gt;% 
  distinct(max) %&gt;% 
  pull(max)
    
    
min = 
  happy_yeari_value %&gt;% 
    mutate(
    min = round(min(gaotong),3)) %&gt;% 
  distinct(min) %&gt;% 
  pull(min)
    

happy_yeari_value %&gt;% 
  drop_na(variable) %&gt;% 
  mutate(
    q = cut(gaotong,             
            breaks = c(min,cut_point,max),
            labels = c(&quot;other&quot;,&quot;top25%&quot;),
            include.lowest = T,
            ordered = T
            )) %&gt;% 
  plot_geo(
    marker = ~list(line = list(width = 0))
    ) %&gt;%  
  add_trace(
    z = ~life_ladder, color = ~life_ladder,
    text = ~label, locations = ~code, marker = list(line = l)
  ) %&gt;%
   add_markers(
    x = ~capital_longitude,
    y= ~capital_latitude, 
   color = ~q,
   sizes = c(.1, 1),
   size = ~gaotong^3,
   text = ~paste(&#39;country: &#39;, country_name,
                  &#39;&lt;/b&gt;&lt;br&gt;&#39;,variable,&#39;: &#39;, 
                  round(gaotong,3))
  ) %&gt;%
  layout(geo = g) %&gt;% 
  colorbar(title = &#39;Happiness index&#39;)  }</code></pre>
<pre class="r"><code>global_happy_points(2012,&quot;log_gdp_per_capita&quot;)</code></pre>
<pre><code>## Warning: `line.width` does not currently support multiple values.

## Warning: `line.width` does not currently support multiple values.</code></pre>
<div id="htmlwidget-0c642732656a3c8625a7" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0c642732656a3c8625a7">{"x":{"visdat":{"103097ba2376":["function () ","plotlyVisDat"]},"cur_data":"103097ba2376","attrs":{"103097ba2376":{"marker":{},"alpha_stroke":1,"sizes":[0.1,1],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","color":{},"size":{},"text":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","geo":{"domain":{"x":[0,1],"y":[0,1]},"showframe":false,"showcoastlines":false,"projection":{"type":"Mercator"}},"scene":{"zaxis":{"title":"life_ladder"}},"hovermode":"closest","showlegend":true,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"Happiness index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666666","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":3.16449117660522,"cmax":7.77620887756348,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666666","rgba(70,19,97,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.125","rgba(71,45,122,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.208333333333333","rgba(64,70,135,1)"],["0.25","rgba(60,82,138,1)"],["0.291666666666667","rgba(56,93,140,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(46,114,142,1)"],["0.416666666666667","rgba(42,123,142,1)"],["0.458333333333333","rgba(38,133,141,1)"],["0.5","rgba(37,144,140,1)"],["0.541666666666667","rgba(33,154,138,1)"],["0.583333333333333","rgba(39,164,133,1)"],["0.625","rgba(47,174,127,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(79,191,110,1)"],["0.75","rgba(98,199,98,1)"],["0.791666666666667","rgba(119,207,85,1)"],["0.833333333333333","rgba(147,214,70,1)"],["0.875","rgba(172,220,52,1)"],["0.916666666666667","rgba(199,225,42,1)"],["0.958333333333333","rgba(226,228,40,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":"rgba(190,190,190,1)","width":0.5}},"z":[3.78293752670288,5.51012420654297,5.60459566116333,4.3602499961853,6.46838712692261,4.31971168518066,7.19558572769165,7.40068864822388,4.91077184677124,5.02718687057495,4.7244439125061,5.74904346466064,6.93512201309204,3.19346880912781,6.0188946723938,4.77314472198486,4.83593893051147,6.66000366210938,4.22229719161987,3.95500802993774,3.89870691299438,4.24463415145874,7.41514444351196,4.03297472000122,6.59912872314453,5.09491729736328,6.37487983703613,3.95564031600952,7.27225017547607,6.0276346206665,6.18050718307495,6.33414936065674,7.51990938186646,4.75331115722656,5.96071624755859,4.20415687561035,5.93437147140503,5.36392784118652,4.5611686706543,7.4202094078064,6.64936542510986,3.97205924987793,4.25444555282593,6.70236206054688,5.05726194381714,5.09635400772095,5.85571718215942,3.65155482292175,4.41347503662109,4.60221815109253,4.68335819244385,7.59066009521484,4.72014665603638,5.36777400970459,4.60892772674561,4.65950870513916,6.96464538574219,7.1108546257019,5.83931398391724,5.96821641921997,5.13199615478516,5.75946950912476,4.54733514785767,5.63958835601807,6.22109460830688,5.20778560638428,4.87608480453491,5.12502527236938,4.57256698608398,5.75439405441284,5.77103710174561,6.96409702301025,4.63964748382568,3.55060958862305,4.27926969528198,5.91428375244141,4.31301689147949,5.96287202835083,4.67320394515991,7.32018518447876,5.9957127571106,4.88515043258667,5.21872425079346,4.96965646743774,4.43893957138062,4.23324489593506,7.47071552276611,7.24962997436523,5.44800615310669,3.79808831214905,5.49295425415039,7.67827701568604,5.13156509399414,6.85983562469482,5.82005834579468,5.82455730438232,5.00196504592896,5.87593173980713,4.99396228790283,6.61129856109619,5.16687488555908,5.62073564529419,3.33304786682129,6.39635944366455,3.66873693466187,5.15452194213867,5.91105937957764,6.06289100646973,5.13388776779175,6.00328683853149,6.29069042205811,4.22459316253662,4.5504994392395,6.26928663253784,7.56014776229858,7.77620887756348,3.16449117660522,4.49657154083252,4.00689744949341,6.30023527145386,4.46353101730347,5.3090763092041,5.46382713317871,4.30923795700073,5.03034210205078,7.21776676177979,6.880784034729,7.02622699737549,6.44972848892212,6.01933193206787,7.06657743453979,5.53456974029541,4.06060075759888,5.01337480545044,4.95510053634644,3.91934180259705,4.63922739028931,5.4837646484375,4.64660835266113,6.12591695785522],"text":["<b>Happiness: 3.78<\/b><br>Country : Afghanistan","<b>Happiness: 5.51<\/b><br>Country : Albania","<b>Happiness: 5.6<\/b><br>Country : Algeria","<b>Happiness: 4.36<\/b><br>Country : Angola","<b>Happiness: 6.47<\/b><br>Country : Argentina","<b>Happiness: 4.32<\/b><br>Country : Armenia","<b>Happiness: 7.2<\/b><br>Country : Australia","<b>Happiness: 7.4<\/b><br>Country : Austria","<b>Happiness: 4.91<\/b><br>Country : Azerbaijan","<b>Happiness: 5.03<\/b><br>Country : Bahrain","<b>Happiness: 4.72<\/b><br>Country : Bangladesh","<b>Happiness: 5.75<\/b><br>Country : Belarus","<b>Happiness: 6.94<\/b><br>Country : Belgium","<b>Happiness: 3.19<\/b><br>Country : Benin","<b>Happiness: 6.02<\/b><br>Country : Bolivia","<b>Happiness: 4.77<\/b><br>Country : Bosnia and Herzegovina","<b>Happiness: 4.84<\/b><br>Country : Botswana","<b>Happiness: 6.66<\/b><br>Country : Brazil","<b>Happiness: 4.22<\/b><br>Country : Bulgaria","<b>Happiness: 3.96<\/b><br>Country : Burkina Faso","<b>Happiness: 3.9<\/b><br>Country : Cambodia","<b>Happiness: 4.24<\/b><br>Country : Cameroon","<b>Happiness: 7.42<\/b><br>Country : Canada","<b>Happiness: 4.03<\/b><br>Country : Chad","<b>Happiness: 6.6<\/b><br>Country : Chile","<b>Happiness: 5.09<\/b><br>Country : China","<b>Happiness: 6.37<\/b><br>Country : Colombia","<b>Happiness: 3.96<\/b><br>Country : Comoros","<b>Happiness: 7.27<\/b><br>Country : Costa Rica","<b>Happiness: 6.03<\/b><br>Country : Croatia","<b>Happiness: 6.18<\/b><br>Country : Cyprus","<b>Happiness: 6.33<\/b><br>Country : Czech Republic","<b>Happiness: 7.52<\/b><br>Country : Denmark","<b>Happiness: 4.75<\/b><br>Country : Dominican Republic","<b>Happiness: 5.96<\/b><br>Country : Ecuador","<b>Happiness: 4.2<\/b><br>Country : Egypt","<b>Happiness: 5.93<\/b><br>Country : El Salvador","<b>Happiness: 5.36<\/b><br>Country : Estonia","<b>Happiness: 4.56<\/b><br>Country : Ethiopia","<b>Happiness: 7.42<\/b><br>Country : Finland","<b>Happiness: 6.65<\/b><br>Country : France","<b>Happiness: 3.97<\/b><br>Country : Gabon","<b>Happiness: 4.25<\/b><br>Country : Georgia","<b>Happiness: 6.7<\/b><br>Country : Germany","<b>Happiness: 5.06<\/b><br>Country : Ghana","<b>Happiness: 5.1<\/b><br>Country : Greece","<b>Happiness: 5.86<\/b><br>Country : Guatemala","<b>Happiness: 3.65<\/b><br>Country : Guinea","<b>Happiness: 4.41<\/b><br>Country : Haiti","<b>Happiness: 4.6<\/b><br>Country : Honduras","<b>Happiness: 4.68<\/b><br>Country : Hungary","<b>Happiness: 7.59<\/b><br>Country : Iceland","<b>Happiness: 4.72<\/b><br>Country : India","<b>Happiness: 5.37<\/b><br>Country : Indonesia","<b>Happiness: 4.61<\/b><br>Country : Iran","<b>Happiness: 4.66<\/b><br>Country : Iraq","<b>Happiness: 6.96<\/b><br>Country : Ireland","<b>Happiness: 7.11<\/b><br>Country : Israel","<b>Happiness: 5.84<\/b><br>Country : Italy","<b>Happiness: 5.97<\/b><br>Country : Japan","<b>Happiness: 5.13<\/b><br>Country : Jordan","<b>Happiness: 5.76<\/b><br>Country : Kazakhstan","<b>Happiness: 4.55<\/b><br>Country : Kenya","<b>Happiness: 5.64<\/b><br>Country : Kosovo","<b>Happiness: 6.22<\/b><br>Country : Kuwait","<b>Happiness: 5.21<\/b><br>Country : Kyrgyzstan","<b>Happiness: 4.88<\/b><br>Country : Laos","<b>Happiness: 5.13<\/b><br>Country : Latvia","<b>Happiness: 4.57<\/b><br>Country : Lebanon","<b>Happiness: 5.75<\/b><br>Country : Libya","<b>Happiness: 5.77<\/b><br>Country : Lithuania","<b>Happiness: 6.96<\/b><br>Country : Luxembourg","<b>Happiness: 4.64<\/b><br>Country : Macedonia","<b>Happiness: 3.55<\/b><br>Country : Madagascar","<b>Happiness: 4.28<\/b><br>Country : Malawi","<b>Happiness: 5.91<\/b><br>Country : Malaysia","<b>Happiness: 4.31<\/b><br>Country : Mali","<b>Happiness: 5.96<\/b><br>Country : Malta","<b>Happiness: 4.67<\/b><br>Country : Mauritania","<b>Happiness: 7.32<\/b><br>Country : Mexico","<b>Happiness: 6<\/b><br>Country : Moldova","<b>Happiness: 4.89<\/b><br>Country : Mongolia","<b>Happiness: 5.22<\/b><br>Country : Montenegro","<b>Happiness: 4.97<\/b><br>Country : Morocco","<b>Happiness: 4.44<\/b><br>Country : Myanmar","<b>Happiness: 4.23<\/b><br>Country : Nepal","<b>Happiness: 7.47<\/b><br>Country : Netherlands","<b>Happiness: 7.25<\/b><br>Country : New Zealand","<b>Happiness: 5.45<\/b><br>Country : Nicaragua","<b>Happiness: 3.8<\/b><br>Country : Niger","<b>Happiness: 5.49<\/b><br>Country : Nigeria","<b>Happiness: 7.68<\/b><br>Country : Norway","<b>Happiness: 5.13<\/b><br>Country : Pakistan","<b>Happiness: 6.86<\/b><br>Country : Panama","<b>Happiness: 5.82<\/b><br>Country : Paraguay","<b>Happiness: 5.82<\/b><br>Country : Peru","<b>Happiness: 5<\/b><br>Country : Philippines","<b>Happiness: 5.88<\/b><br>Country : Poland","<b>Happiness: 4.99<\/b><br>Country : Portugal","<b>Happiness: 6.61<\/b><br>Country : Qatar","<b>Happiness: 5.17<\/b><br>Country : Romania","<b>Happiness: 5.62<\/b><br>Country : Russia","<b>Happiness: 3.33<\/b><br>Country : Rwanda","<b>Happiness: 6.4<\/b><br>Country : Saudi Arabia","<b>Happiness: 3.67<\/b><br>Country : Senegal","<b>Happiness: 5.15<\/b><br>Country : Serbia","<b>Happiness: 5.91<\/b><br>Country : Slovakia","<b>Happiness: 6.06<\/b><br>Country : Slovenia","<b>Happiness: 5.13<\/b><br>Country : South Africa","<b>Happiness: 6<\/b><br>Country : South Korea","<b>Happiness: 6.29<\/b><br>Country : Spain","<b>Happiness: 4.22<\/b><br>Country : Sri Lanka","<b>Happiness: 4.55<\/b><br>Country : Sudan","<b>Happiness: 6.27<\/b><br>Country : Suriname","<b>Happiness: 7.56<\/b><br>Country : Sweden","<b>Happiness: 7.78<\/b><br>Country : Switzerland","<b>Happiness: 3.16<\/b><br>Country : Syria","<b>Happiness: 4.5<\/b><br>Country : Tajikistan","<b>Happiness: 4.01<\/b><br>Country : Tanzania","<b>Happiness: 6.3<\/b><br>Country : Thailand","<b>Happiness: 4.46<\/b><br>Country : Tunisia","<b>Happiness: 5.31<\/b><br>Country : Turkey","<b>Happiness: 5.46<\/b><br>Country : Turkmenistan","<b>Happiness: 4.31<\/b><br>Country : Uganda","<b>Happiness: 5.03<\/b><br>Country : Ukraine","<b>Happiness: 7.22<\/b><br>Country : United Arab Emirates","<b>Happiness: 6.88<\/b><br>Country : United Kingdom","<b>Happiness: 7.03<\/b><br>Country : United States","<b>Happiness: 6.45<\/b><br>Country : Uruguay","<b>Happiness: 6.02<\/b><br>Country : Uzbekistan","<b>Happiness: 7.07<\/b><br>Country : Venezuela","<b>Happiness: 5.53<\/b><br>Country : Vietnam","<b>Happiness: 4.06<\/b><br>Country : Yemen","<b>Happiness: 5.01<\/b><br>Country : Zambia","<b>Happiness: 4.96<\/b><br>Country : Zimbabwe","<b>Happiness: 3.92<\/b><br>Country : Congo (Brazzaville)","<b>Happiness: 4.64<\/b><br>Country : Congo (Kinshasa)","<b>Happiness: 5.48<\/b><br>Country : Hong Kong S.A.R. of China","<b>Happiness: 4.65<\/b><br>Country : Palestinian Territories","<b>Happiness: 6.13<\/b><br>Country : Taiwan Province of China"],"locations":["AFG","ALB","DZA","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HUN","ISL","IND","IDN","IRN","IRQ","IRL","ISR","ITA","JPN","JOR","KAZ","KEN","XKX","KWT","KGZ","LAO","LVA","LBN","LBY","LTU","LUX","MKD","MDG","MWI","MYS","MLI","MLT","MRT","MEX","MDA","MNG","MNE","MAR","MMR","NPL","NLD","NZL","NIC","NER","NGA","NOR","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SVK","SVN","ZAF","KOR","ESP","LKA","SDN","SUR","SWE","CHE","SYR","TJK","TZA","THA","TUN","TUR","TKM","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE","COG","COD","HKG","PSE","TWN"],"type":"choropleth","geo":"geo","frame":null},{"marker":{"color":"rgba(253,231,37,1)","size":[79.2994480522063,80.3808973391005,78.182328228707,78.2368662373829,78.7065904903434,71.6827123598222,69.1097872864743,80.2535218357279,77.5116705323197,75.7932272359216,79.3407989342922,77.5237647679907,80.6294191706758,70.8057051349281,74.3244802403384,75.130194943622,95.7902781913702,100,69.6186844955603,80.8857465788843,72.9646517689674,89.8167924735898,83.2713640524874,67.0829491919306,68.6390581884489,71.7498568729646,71.2258034460166,79.636551068377,86.6140707273563,88.179531074376,75.4945651032709,83.7349287067744,83.6589675871477,78.1689136505996],"sizemode":"area","line":{"color":"rgba(253,231,37,1)","width":0}},"type":"scattergeo","mode":"markers","text":["country:  Australia <\/b><br> log_gdp_per_capita :  10.663","country:  Austria <\/b><br> log_gdp_per_capita :  10.704","country:  Bahrain <\/b><br> log_gdp_per_capita :  10.62","country:  Belgium <\/b><br> log_gdp_per_capita :  10.622","country:  Canada <\/b><br> log_gdp_per_capita :  10.641","country:  Cyprus <\/b><br> log_gdp_per_capita :  10.364","country:  Czech Republic <\/b><br> log_gdp_per_capita :  10.259","country:  Denmark <\/b><br> log_gdp_per_capita :  10.7","country:  Finland <\/b><br> log_gdp_per_capita :  10.594","country:  France <\/b><br> log_gdp_per_capita :  10.527","country:  Germany <\/b><br> log_gdp_per_capita :  10.665","country:  Iceland <\/b><br> log_gdp_per_capita :  10.595","country:  Ireland <\/b><br> log_gdp_per_capita :  10.714","country:  Israel <\/b><br> log_gdp_per_capita :  10.328","country:  Italy <\/b><br> log_gdp_per_capita :  10.47","country:  Japan <\/b><br> log_gdp_per_capita :  10.501","country:  Kuwait <\/b><br> log_gdp_per_capita :  11.26","country:  Luxembourg <\/b><br> log_gdp_per_capita :  11.402","country:  Malta <\/b><br> log_gdp_per_capita :  10.28","country:  Netherlands <\/b><br> log_gdp_per_capita :  10.724","country:  New Zealand <\/b><br> log_gdp_per_capita :  10.415","country:  Norway <\/b><br> log_gdp_per_capita :  11.051","country:  Saudi Arabia <\/b><br> log_gdp_per_capita :  10.813","country:  Slovakia <\/b><br> log_gdp_per_capita :  10.174","country:  Slovenia <\/b><br> log_gdp_per_capita :  10.239","country:  South Korea <\/b><br> log_gdp_per_capita :  10.366","country:  Spain <\/b><br> log_gdp_per_capita :  10.345","country:  Sweden <\/b><br> log_gdp_per_capita :  10.676","country:  Switzerland <\/b><br> log_gdp_per_capita :  10.936","country:  United Arab Emirates <\/b><br> log_gdp_per_capita :  10.992","country:  United Kingdom <\/b><br> log_gdp_per_capita :  10.516","country:  United States <\/b><br> log_gdp_per_capita :  10.83","country:  Hong Kong S.A.R. of China <\/b><br> log_gdp_per_capita :  10.827","country:  Taiwan Province of China <\/b><br> log_gdp_per_capita :  10.62"],"name":"top25%","textfont":{"color":"rgba(253,231,37,1)","size":[79.2994480522063,80.3808973391005,78.182328228707,78.2368662373829,78.7065904903434,71.6827123598222,69.1097872864743,80.2535218357279,77.5116705323197,75.7932272359216,79.3407989342922,77.5237647679907,80.6294191706758,70.8057051349281,74.3244802403384,75.130194943622,95.7902781913702,100,69.6186844955603,80.8857465788843,72.9646517689674,89.8167924735898,83.2713640524874,67.0829491919306,68.6390581884489,71.7498568729646,71.2258034460166,79.636551068377,86.6140707273563,88.179531074376,75.4945651032709,83.7349287067744,83.6589675871477,78.1689136505996]},"line":{"color":"rgba(253,231,37,1)"},"geo":"geo","lat":[-35.2666666666667,48.2,26.2333333333333,50.8333333333333,45.4166666666667,35.1666666666667,50.0833333333333,55.6666666666667,60.1666666666667,48.8666666666667,52.5166666666667,64.15,53.3166666666667,31.7666666666667,41.9,35.6833333333333,29.3666666666667,49.6,35.8833333333333,52.35,-41.3,59.9166666666667,24.65,48.15,46.05,37.55,40.4,59.3333333333333,46.9166666666667,24.4666666666667,51.5,38.883333,114.1,25.066667],"lon":[149.133333,16.366667,50.566667,4.333333,-75.7,33.366667,14.466667,12.583333,24.933333,2.333333,13.4,-21.95,-6.233333,35.233333,12.483333,139.75,47.966667,6.116667,14.5,4.916667,174.783333,10.75,46.7,17.116667,14.516667,126.983333,-3.683333,18.05,7.466667,54.366667,-0.083333,-77,22.2,121.516667],"frame":null},{"marker":{"color":"rgba(68,1,84,1)","size":[18.8834903591498,46.9423790483932,51.7552345695023,36.8021010630493,59.9159758931845,40.8160271288865,55.730088137215,24.1691196041534,57.8061611163558,19.0010104338063,36.1932525651493,46.0931330687784,53.4051492781705,54.6683355438545,55.5722606567895,16.4786052847272,24.6951572852532,25.7718002253086,19.7365133184843,62.2671970084186,48.3731101959499,49.5887966462931,15.653055342427,52.8580893693226,61.1930919778614,48.9915907008104,46.8518202442556,45.8816598310771,38.6518626560472,66.600752806853,13.932358865916,56.095554429904,41.7024233447489,28.5573427283495,65.3484856319615,39.2732601127461,17.7512541158532,16.9856280902177,30.599961840983,63.5785421616196,33.1100046655906,44.7242346376667,56.7118913905182,53.9629491471806,44.1216906436441,62.9619139966166,23.6087883575089,42.8614195605451,25.0171750940354,32.9949887581362,61.7236293242323,54.5799233242291,65.9135416150939,65.0434456193657,49.0871696528973,15.2099411733075,12.015652730469,63.5874522010026,18.63910957472,27.8210140403967,56.4078490541936,30.6526688158863,45.8150595980073,53.1407352483109,38.9906976649889,30.6457240865447,20.6592450509349,31.7865868260436,10,34.79833442363,31.4713428258708,58.988324213247,40.3261339738884,48.0086663974779,36.7698724240725,64.2226376163988,66.7057107658884,58.8200985249023,66.1020246429234,16.4800014856263,21.1883680824574,51.337859448051,50.2220757292009,46.1916975990017,30.4460541839999,54.6857140974293,32.9907015934651,22.0228273417727,21.4395648142708,53.7046001597611,47.0075644173459,61.1209579701718,50.2556229923592,17.1707092621581,42.7167332706541,59.0316708543312,32.8973790148122,58.0548755663432,33.0879680890439,29.23137737597,28.0267593677542,19.108926988707,34.5804932472218,33.1588223081968],"sizemode":"area","line":{"color":"rgba(68,1,84,1)","width":0}},"type":"scattergeo","mode":"markers","text":["country:  Afghanistan <\/b><br> log_gdp_per_capita :  7.517","country:  Albania <\/b><br> log_gdp_per_capita :  9.247","country:  Algeria <\/b><br> log_gdp_per_capita :  9.485","country:  Angola <\/b><br> log_gdp_per_capita :  8.699","country:  Argentina <\/b><br> log_gdp_per_capita :  9.864","country:  Armenia <\/b><br> log_gdp_per_capita :  8.924","country:  Azerbaijan <\/b><br> log_gdp_per_capita :  9.673","country:  Bangladesh <\/b><br> log_gdp_per_capita :  7.903","country:  Belarus <\/b><br> log_gdp_per_capita :  9.769","country:  Benin <\/b><br> log_gdp_per_capita :  7.526","country:  Bolivia <\/b><br> log_gdp_per_capita :  8.664","country:  Bosnia and Herzegovina <\/b><br> log_gdp_per_capita :  9.203","country:  Botswana <\/b><br> log_gdp_per_capita :  9.564","country:  Brazil <\/b><br> log_gdp_per_capita :  9.624","country:  Bulgaria <\/b><br> log_gdp_per_capita :  9.666","country:  Burkina Faso <\/b><br> log_gdp_per_capita :  7.327","country:  Cambodia <\/b><br> log_gdp_per_capita :  7.94","country:  Cameroon <\/b><br> log_gdp_per_capita :  8.013","country:  Chad <\/b><br> log_gdp_per_capita :  7.582","country:  Chile <\/b><br> log_gdp_per_capita :  9.968","country:  China <\/b><br> log_gdp_per_capita :  9.319","country:  Colombia <\/b><br> log_gdp_per_capita :  9.379","country:  Comoros <\/b><br> log_gdp_per_capita :  7.26","country:  Costa Rica <\/b><br> log_gdp_per_capita :  9.538","country:  Croatia <\/b><br> log_gdp_per_capita :  9.921","country:  Dominican Republic <\/b><br> log_gdp_per_capita :  9.35","country:  Ecuador <\/b><br> log_gdp_per_capita :  9.242","country:  Egypt <\/b><br> log_gdp_per_capita :  9.192","country:  El Salvador <\/b><br> log_gdp_per_capita :  8.804","country:  Estonia <\/b><br> log_gdp_per_capita :  10.154","country:  Ethiopia <\/b><br> log_gdp_per_capita :  7.115","country:  Gabon <\/b><br> log_gdp_per_capita :  9.69","country:  Georgia <\/b><br> log_gdp_per_capita :  8.972","country:  Ghana <\/b><br> log_gdp_per_capita :  8.198","country:  Greece <\/b><br> log_gdp_per_capita :  10.101","country:  Guatemala <\/b><br> log_gdp_per_capita :  8.839","country:  Guinea <\/b><br> log_gdp_per_capita :  7.429","country:  Haiti <\/b><br> log_gdp_per_capita :  7.368","country:  Honduras <\/b><br> log_gdp_per_capita :  8.328","country:  Hungary <\/b><br> log_gdp_per_capita :  10.025","country:  India <\/b><br> log_gdp_per_capita :  8.482","country:  Indonesia <\/b><br> log_gdp_per_capita :  9.133","country:  Iran <\/b><br> log_gdp_per_capita :  9.719","country:  Iraq <\/b><br> log_gdp_per_capita :  9.591","country:  Jordan <\/b><br> log_gdp_per_capita :  9.101","country:  Kazakhstan <\/b><br> log_gdp_per_capita :  9.998","country:  Kenya <\/b><br> log_gdp_per_capita :  7.864","country:  Kosovo <\/b><br> log_gdp_per_capita :  9.034","country:  Kyrgyzstan <\/b><br> log_gdp_per_capita :  7.962","country:  Laos <\/b><br> log_gdp_per_capita :  8.475","country:  Latvia <\/b><br> log_gdp_per_capita :  9.944","country:  Lebanon <\/b><br> log_gdp_per_capita :  9.62","country:  Libya <\/b><br> log_gdp_per_capita :  10.125","country:  Lithuania <\/b><br> log_gdp_per_capita :  10.088","country:  Macedonia <\/b><br> log_gdp_per_capita :  9.354","country:  Madagascar <\/b><br> log_gdp_per_capita :  7.223","country:  Malawi <\/b><br> log_gdp_per_capita :  6.947","country:  Malaysia <\/b><br> log_gdp_per_capita :  10.025","country:  Mali <\/b><br> log_gdp_per_capita :  7.498","country:  Mauritania <\/b><br> log_gdp_per_capita :  8.15","country:  Mexico <\/b><br> log_gdp_per_capita :  9.705","country:  Moldova <\/b><br> log_gdp_per_capita :  8.331","country:  Mongolia <\/b><br> log_gdp_per_capita :  9.189","country:  Montenegro <\/b><br> log_gdp_per_capita :  9.552","country:  Morocco <\/b><br> log_gdp_per_capita :  8.823","country:  Myanmar <\/b><br> log_gdp_per_capita :  8.331","country:  Nepal <\/b><br> log_gdp_per_capita :  7.651","country:  Nicaragua <\/b><br> log_gdp_per_capita :  8.401","country:  Niger <\/b><br> log_gdp_per_capita :  6.76","country:  Nigeria <\/b><br> log_gdp_per_capita :  8.583","country:  Pakistan <\/b><br> log_gdp_per_capita :  8.382","country:  Panama <\/b><br> log_gdp_per_capita :  9.822","country:  Paraguay <\/b><br> log_gdp_per_capita :  8.897","country:  Peru <\/b><br> log_gdp_per_capita :  9.301","country:  Philippines <\/b><br> log_gdp_per_capita :  8.698","country:  Poland <\/b><br> log_gdp_per_capita :  10.053","country:  Portugal <\/b><br> log_gdp_per_capita :  10.158","country:  Romania <\/b><br> log_gdp_per_capita :  9.815","country:  Russia <\/b><br> log_gdp_per_capita :  10.133","country:  Rwanda <\/b><br> log_gdp_per_capita :  7.328","country:  Senegal <\/b><br> log_gdp_per_capita :  7.69","country:  Serbia <\/b><br> log_gdp_per_capita :  9.465","country:  South Africa <\/b><br> log_gdp_per_capita :  9.41","country:  Sri Lanka <\/b><br> log_gdp_per_capita :  9.208","country:  Sudan <\/b><br> log_gdp_per_capita :  8.318","country:  Suriname <\/b><br> log_gdp_per_capita :  9.625","country:  Syria <\/b><br> log_gdp_per_capita :  8.475","country:  Tajikistan <\/b><br> log_gdp_per_capita :  7.751","country:  Tanzania <\/b><br> log_gdp_per_capita :  7.709","country:  Thailand <\/b><br> log_gdp_per_capita :  9.578","country:  Tunisia <\/b><br> log_gdp_per_capita :  9.25","country:  Turkey <\/b><br> log_gdp_per_capita :  9.917","country:  Turkmenistan <\/b><br> log_gdp_per_capita :  9.412","country:  Uganda <\/b><br> log_gdp_per_capita :  7.383","country:  Ukraine <\/b><br> log_gdp_per_capita :  9.027","country:  Uruguay <\/b><br> log_gdp_per_capita :  9.824","country:  Uzbekistan <\/b><br> log_gdp_per_capita :  8.469","country:  Venezuela <\/b><br> log_gdp_per_capita :  9.78","country:  Vietnam <\/b><br> log_gdp_per_capita :  8.481","country:  Yemen <\/b><br> log_gdp_per_capita :  8.241","country:  Zambia <\/b><br> log_gdp_per_capita :  8.163","country:  Zimbabwe <\/b><br> log_gdp_per_capita :  7.534","country:  Congo (Brazzaville) <\/b><br> log_gdp_per_capita :  8.57","country:  Palestinian Territories <\/b><br> log_gdp_per_capita :  8.485"],"name":"other","textfont":{"color":"rgba(68,1,84,1)","size":[18.8834903591498,46.9423790483932,51.7552345695023,36.8021010630493,59.9159758931845,40.8160271288865,55.730088137215,24.1691196041534,57.8061611163558,19.0010104338063,36.1932525651493,46.0931330687784,53.4051492781705,54.6683355438545,55.5722606567895,16.4786052847272,24.6951572852532,25.7718002253086,19.7365133184843,62.2671970084186,48.3731101959499,49.5887966462931,15.653055342427,52.8580893693226,61.1930919778614,48.9915907008104,46.8518202442556,45.8816598310771,38.6518626560472,66.600752806853,13.932358865916,56.095554429904,41.7024233447489,28.5573427283495,65.3484856319615,39.2732601127461,17.7512541158532,16.9856280902177,30.599961840983,63.5785421616196,33.1100046655906,44.7242346376667,56.7118913905182,53.9629491471806,44.1216906436441,62.9619139966166,23.6087883575089,42.8614195605451,25.0171750940354,32.9949887581362,61.7236293242323,54.5799233242291,65.9135416150939,65.0434456193657,49.0871696528973,15.2099411733075,12.015652730469,63.5874522010026,18.63910957472,27.8210140403967,56.4078490541936,30.6526688158863,45.8150595980073,53.1407352483109,38.9906976649889,30.6457240865447,20.6592450509349,31.7865868260436,10,34.79833442363,31.4713428258708,58.988324213247,40.3261339738884,48.0086663974779,36.7698724240725,64.2226376163988,66.7057107658884,58.8200985249023,66.1020246429234,16.4800014856263,21.1883680824574,51.337859448051,50.2220757292009,46.1916975990017,30.4460541839999,54.6857140974293,32.9907015934651,22.0228273417727,21.4395648142708,53.7046001597611,47.0075644173459,61.1209579701718,50.2556229923592,17.1707092621581,42.7167332706541,59.0316708543312,32.8973790148122,58.0548755663432,33.0879680890439,29.23137737597,28.0267593677542,19.108926988707,34.5804932472218,33.1588223081968]},"line":{"color":"rgba(68,1,84,1)"},"geo":"geo","lat":[34.5166666666667,41.3166666666667,36.75,-8.83333333333333,-34.5833333333333,40.1666666666667,40.3833333333333,23.7166666666667,53.9,6.48333333333333,-16.5,43.8666666666667,-24.6333333333333,-15.7833333333333,42.6833333333333,12.3666666666667,11.55,3.86666666666667,12.1,-33.45,39.9166666666667,4.6,-11.7,9.93333333333333,45.8,18.4666666666667,-0.216666666666667,30.05,13.7,59.4333333333333,9.03333333333333,0.383333333333333,41.6833333333333,5.55,37.9833333333333,14.6166666666667,9.5,18.5333333333333,14.1,47.5,28.6,-6.16666666666667,35.7,33.3333333333333,31.95,51.1666666666667,-1.28333333333333,42.6666666666667,42.8666666666667,17.9666666666667,56.95,33.8666666666667,32.8833333333333,54.6833333333333,42,-18.9166666666667,-13.9666666666667,3.16666666666667,12.65,18.0666666666667,19.4333333333333,47,47.9166666666667,42.4333333333333,34.0166666666667,16.8,27.7166666666667,12.1333333333333,13.5166666666667,9.08333333333333,33.6833333333333,8.96666666666667,-25.2666666666667,-12.05,14.6,52.25,38.7166666666667,44.4333333333333,55.75,-1.95,14.7333333333333,44.8333333333333,-25.7,6.91666666666667,15.6,5.83333333333333,33.5,38.55,-6.8,13.75,36.8,39.9333333333333,37.95,0.316666666666667,50.4333333333333,-34.85,41.3166666666667,10.4833333333333,21.0333333333333,15.35,-15.4166666666667,-17.8166666666667,-4.267778,31.516667],"lon":[69.183333,19.816667,3.05,13.216667,-58.666667,44.5,49.866667,90.4,27.566667,2.616667,-68.15,18.416667,25.9,-47.916667,23.316667,-1.516667,104.916667,11.516667,15.033333,-70.666667,116.383333,-74.083333,43.233333,-84.083333,16,-69.9,-78.5,31.25,-89.2,24.716667,38.7,9.45,44.833333,-0.216667,23.733333,-90.516667,-13.7,-72.333333,-87.216667,19.083333,77.2,106.816667,51.416667,44.4,35.933333,71.416667,36.816667,21.166667,74.6,102.6,24.1,35.5,13.166667,25.316667,21.433333,47.516667,33.783333,101.7,-8,-15.966667,-99.133333,28.85,106.916667,19.266667,-6.816667,96.15,85.316667,-86.25,2.116667,7.533333,73.05,-79.533333,-57.666667,-77.05,120.966667,21,-9.133333,26.1,37.6,30.05,-17.633333,20.5,28.216667,79.833333,32.533333,-55.166667,36.3,68.766667,39.283333,100.516667,10.183333,32.866667,58.383333,32.55,30.516667,-56.166667,69.25,-66.866667,105.85,44.2,28.283333,31.033333,15.291944,34.45],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>ui &lt;- shinyUI(fluidPage(
  titlePanel(&quot;relationship plot&quot;),
  sidebarPanel(
    selectInput(&#39;year&#39;, &#39;Year&#39;, sort(unique(as.numeric(happy_location$year))),
    selected = &quot;2018&quot;),
    selectInput(&#39;variable&#39;, &#39;Predictor&#39;, names(happy_location)[5:12],
    selected = &quot;social_support&quot;)),
  mainPanel(
    plotlyOutput(&quot;Plot1&quot;)
  )
))


## instead with world map 

server &lt;- shinyServer(function(input, output) {

  output$Plot1 &lt;- renderPlotly({

    ##plot function
    p &lt;- global_happy_points(as.numeric(input$year),as.character(input$variable)) 
    ## When having 2 data input, we need to put it together? how could we use it separatly?
    layout(p)
  })
})
shinyApp(ui, server)</code></pre>
<iframe data-deferred-src="app811011f6a3f4f3ed518a8de5a6d06688/?w=&amp;__subapp__=1" width="100%" height="400" class="shiny-frame shiny-frame-deferred"></iframe>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
