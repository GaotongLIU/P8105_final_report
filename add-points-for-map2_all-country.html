<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ruoyuan Qian" />

<meta name="date" content="2019-11-15" />

<title>Untitled</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.46.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Project Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">Final report</a>
</li>
<li>
  <a href="data.html">Data</a>
</li>
<li>
  <a href="flex_dashboard.html">Associaiton Map</a>
</li>
<li>
  <a href="global_animation_plot.html">Global Animation Map</a>
</li>
<li>
  <a href="mailto:&lt;gl2677@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/GaotongLIU/P8105_final_report.io.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="section-header">



<h1 class="title toc-ignore">Untitled</h1>
<h4 class="author">Ruoyuan Qian</h4>
<h4 class="date">11/15/2019</h4>

</div>


<pre class="r"><code>library(plotly)
library(shiny)
library(tidyverse)
library(rworldmap)
library(arsenal)
library(leaflet)
library(rworldmap) 
library(countrycode)  # Gets country code 
library(viridis)</code></pre>
<pre class="r"><code>happy = read_csv(&quot;data/final_data_all_country.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  unique %&gt;% 
  filter(year == 2018) %&gt;% 
  mutate(label = str_c(&quot;&lt;b&gt;Happiness: &quot;, round(life_ladder,2), 
                      &quot;&lt;/b&gt;&lt;br&gt;Country : &quot;, country_name,
                      sep = &quot;&quot;),
        code = countrycode(country_name, &#39;country.name&#39;, &#39;iso3c&#39;),## match code
        code = replace_na(code,&quot;XKX&quot;))</code></pre>
<pre><code>## Warning: Missing column names filled in: &#39;X1&#39; [1]</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   X1 = col_double(),
##   country_name = col_character(),
##   year = col_double(),
##   life_ladder = col_double(),
##   log_gdp_per_capita = col_double(),
##   social_support = col_double(),
##   healthy_life_expectancy_at_birth = col_double(),
##   freedom_to_make_life_choices = col_double(),
##   positive_affect = col_double(),
##   negative_affect = col_double(),
##   generosity = col_double(),
##   perceptions_of_corruption = col_double()
## )</code></pre>
<pre><code>## Warning in countrycode(country_name, &quot;country.name&quot;, &quot;iso3c&quot;): Some values were not matched unambiguously: Kosovo</code></pre>
<pre class="r"><code># light grey boundaries
l &lt;- list(color = toRGB(&quot;grey&quot;), width = 0.5)

# specify map projection/options
g &lt;- list(
  showframe = FALSE,
  showcoastlines = FALSE,
  projection = list(type = &#39;Mercator&#39;)
)</code></pre>
<pre class="r"><code>happy = read_csv(&quot;data/final_data_all_country.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  unique %&gt;% 
  mutate(label = str_c(&quot;&lt;b&gt;Happiness: &quot;, round(life_ladder,2), 
                      &quot;&lt;/b&gt;&lt;br&gt;Country : &quot;, country_name,
                      sep = &quot;&quot;),
        code = countrycode(country_name, &#39;country.name&#39;, &#39;iso3c&#39;),## match code
        code = replace_na(code,&quot;XKX&quot;))</code></pre>
<pre><code>## Warning: Missing column names filled in: &#39;X1&#39; [1]</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   X1 = col_double(),
##   country_name = col_character(),
##   year = col_double(),
##   life_ladder = col_double(),
##   log_gdp_per_capita = col_double(),
##   social_support = col_double(),
##   healthy_life_expectancy_at_birth = col_double(),
##   freedom_to_make_life_choices = col_double(),
##   positive_affect = col_double(),
##   negative_affect = col_double(),
##   generosity = col_double(),
##   perceptions_of_corruption = col_double()
## )</code></pre>
<pre><code>## Warning in countrycode(country_name, &quot;country.name&quot;, &quot;iso3c&quot;): Some values were not matched unambiguously: Kosovo</code></pre>
<pre class="r"><code>location = read_csv(&quot;data/concap.csv&quot;) %&gt;% 
  janitor::clean_names() </code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   CountryName = col_character(),
##   CapitalName = col_character(),
##   CapitalLatitude = col_double(),
##   CapitalLongitude = col_double(),
##   CountryCode = col_character(),
##   ContinentName = col_character()
## )</code></pre>
<pre class="r"><code>happy_location_raw = left_join(happy, location, by = &quot;country_name&quot;)

 list &lt;-which(rowSums(is.na(happy_location_raw %&gt;% 
                              select(capital_latitude))) &gt; 0)
  data_all_na &lt;- happy_location_raw[list,] 
 
  happy_location_lost =  
 happy_location_raw[list,] %&gt;% 
   mutate(capital_latitude = case_when(
    country_name == &quot;Congo (Brazzaville)&quot; ~ -4.267778,
    country_name == &quot;Ivory Coast&quot; ~ 6.85,
    country_name == &quot;Gambia&quot; ~ 13.466667,
    country_name == &quot;North Cyprus&quot; ~ 35.183333,
    country_name == &quot;Palestinian Territories&quot; ~ 31.516667,
    country_name == &quot;Taiwan Province of China&quot;~ 25.066667,
    country_name == &quot;Somaliland region&quot;~ 9.55,
    country_name == &quot;Congo (Kinshasa)&quot;~ -4.316667,
    country_name == &quot;Hong Kong S.A.R. of China&quot;~ 114.10000
    ),
    capital_longitude = case_when(
    country_name == &quot;Congo (Brazzaville)&quot; ~ 15.291944,
    country_name == &quot;Ivory Coast&quot; ~ 5.3,
    country_name == &quot;Gambia&quot; ~ -16.6,
    country_name == &quot;North Cyprus&quot; ~ 33.366667,
    country_name == &quot;Palestinian Territories&quot; ~ 34.45,
    country_name == &quot;Taiwan Province of China&quot;~ 121.516667,
    country_name == &quot;Somaliland region&quot;~ 44.05,
    country_name == &quot;Congo (Kinshasa)&quot;~ 15.316667,
    country_name == &quot;Hong Kong S.A.R. of China&quot;~ 22.20000)
    ) 
  

    
happy_location = 
bind_rows(happy_location_raw,happy_location_lost) %&gt;% 
  drop_na(capital_latitude,capital_longitude)

 list &lt;-which(rowSums(is.na(happy_location %&gt;% 
                              select(capital_latitude))) &gt; 0)
  data_all_na &lt;- happy_location[list,]</code></pre>
<p>Congo : -4.267778, 15.291944 Gambia: lat 13.466667, lon -16.6 North Cyprus : 35.183333 33.366667 Palestinian Territories : 31.516667, 34.45 Taiwan : 25.066667 121.516667 Somaliland region : 9.55, 44.05 Congo (Kinshasa) : -4.316667, 15.316667 hongkong : 114.10000,22.20000</p>
<pre class="r"><code> happy_location_2018 = happy_location %&gt;% 
    filter(year == 2018)</code></pre>
<p>问题： 1.点太大，不会改 2.如何只改变点的透明度 3.点的大小太接近</p>
<pre class="r"><code> happy_location_2018 %&gt;%
  plot_geo(marker = list(color = toRGB(&quot;purple&quot;),
                       #opacity = 0.5,    #用了整个地图会一起透明
                       #size = 0.5,
                       line = list(color = toRGB(&quot;purple&quot;),
                                   width = 0.1))) %&gt;%  
  add_trace(
    z = ~life_ladder, color = ~life_ladder, colors = &#39;Blues&#39;,
    text = ~label, locations = ~code, marker = list(line = l)
  ) %&gt;%
    add_markers(x = ~capital_longitude,
              y = ~capital_latitude,
              sizes = c(.1, 1), #改了没变化，不知道怎么用
              size = ~social_support,
              hoverinfo = &quot;text&quot;,
              text = ~paste(&#39;country: &#39;, country_name,
                            &#39;&lt;br /&gt; social support: &#39;, social_support)) %&gt;%
  layout(geo = g) %&gt;% 
  colorbar(title = &#39;Happiness index&#39;) </code></pre>
<pre><code>## Warning: `line.width` does not currently support multiple values.</code></pre>
<div id="htmlwidget-e6d10e21560e5789af37" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e6d10e21560e5789af37">{"x":{"visdat":{"98f44b1b829c":["function () ","plotlyVisDat"]},"cur_data":"98f44b1b829c","attrs":{"98f44b1b829c":{"marker":{"color":"rgba(160,32,240,1)","line":{"color":"rgba(160,32,240,1)","width":0.1}},"alpha_stroke":1,"sizes":[0.1,1],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","size":{},"hoverinfo":"text","text":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","geo":{"domain":{"x":[0,1],"y":[0,1]},"showframe":false,"showcoastlines":false,"projection":{"type":"Mercator"}},"scene":{"zaxis":{"title":"life_ladder"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"Happiness index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(247,251,255,1)"],["0.0416666666666667","rgba(239,246,252,1)"],["0.0833333333333333","rgba(230,240,250,1)"],["0.125","rgba(222,235,247,1)"],["0.166666666666667","rgba(214,230,244,1)"],["0.208333333333333","rgba(206,224,242,1)"],["0.25","rgba(198,219,239,1)"],["0.291666666666667","rgba(185,213,234,1)"],["0.333333333333333","rgba(172,208,230,1)"],["0.375","rgba(158,202,225,1)"],["0.416666666666667","rgba(142,193,221,1)"],["0.458333333333333","rgba(125,183,218,1)"],["0.5","rgba(107,174,214,1)"],["0.541666666666667","rgba(94,165,209,1)"],["0.583333333333333","rgba(81,155,203,1)"],["0.625","rgba(66,146,198,1)"],["0.666666666666667","rgba(57,135,192,1)"],["0.708333333333333","rgba(46,124,187,1)"],["0.75","rgba(33,113,181,1)"],["0.791666666666667","rgba(27,102,173,1)"],["0.833333333333333","rgba(19,91,164,1)"],["0.875","rgba(8,81,156,1)"],["0.916666666666667","rgba(9,70,139,1)"],["0.958333333333333","rgba(9,59,123,1)"],["1","rgba(8,48,107,1)"]],"showscale":true,"marker":{"color":"rgba(160,32,240,1)","line":{"colorbar":{"title":"","ticklen":2},"cmin":2.69430327415466,"cmax":7.85810708999634,"colorscale":[["0","rgba(247,251,255,1)"],["0.0416666666666667","rgba(239,246,252,1)"],["0.0833333333333333","rgba(230,240,250,1)"],["0.125","rgba(222,235,247,1)"],["0.166666666666667","rgba(214,230,244,1)"],["0.208333333333333","rgba(206,224,242,1)"],["0.25","rgba(198,219,239,1)"],["0.291666666666667","rgba(185,213,234,1)"],["0.333333333333333","rgba(172,208,230,1)"],["0.375","rgba(158,202,225,1)"],["0.416666666666667","rgba(142,193,221,1)"],["0.458333333333333","rgba(125,183,218,1)"],["0.5","rgba(107,174,214,1)"],["0.541666666666667","rgba(94,165,209,1)"],["0.583333333333333","rgba(81,155,203,1)"],["0.625","rgba(66,146,198,1)"],["0.666666666666667","rgba(57,135,192,1)"],["0.708333333333333","rgba(46,124,187,1)"],["0.75","rgba(33,113,181,1)"],["0.791666666666667","rgba(27,102,173,1)"],["0.833333333333333","rgba(19,91,164,1)"],["0.875","rgba(8,81,156,1)"],["0.916666666666667","rgba(9,70,139,1)"],["0.958333333333333","rgba(9,59,123,1)"],["1","rgba(8,48,107,1)"]],"showscale":false,"color":"rgba(190,190,190,1)","width":0.5}},"z":[2.69430327415466,5.00440263748169,5.04308605194092,5.79279661178589,5.06244850158691,7.17699337005615,7.3960018157959,5.16799545288086,4.49921703338623,5.23376989364624,6.89217185974121,5.81982707977295,5.91573429107666,5.88740110397339,3.46136569976807,6.19092178344727,5.09881353378296,4.92723608016968,3.77528309822083,5.1218376159668,5.25073766708374,7.17549657821655,4.48632526397705,6.43622064590454,5.13143396377563,5.98351240158081,3.97281956672668,7.14107465744019,5.53627109527588,6.27644300460815,7.03416538238525,7.64878559112549,5.43321561813354,6.12801027297974,4.00545072555542,6.27624607086182,6.09130239486694,4.37926244735718,7.85810708999634,6.66590356826782,4.78300905227661,4.65909719467163,7.11836433410645,5.40928936004639,6.62659168243408,5.25222682952881,3.61492800712585,5.90842390060425,3.81806874275208,5.34029579162598,4.27811765670776,6.96233558654785,6.92717885971069,6.51652669906616,5.79357528686523,4.63893365859985,6.00763607025146,4.65570259094238,6.39182567596436,5.29738330841064,4.85940217971802,5.90115404129028,5.16718673706055,4.13485288619995,5.49397754669189,6.30887889862061,7.24263095855713,5.23983478546143,4.07058668136597,3.33463358879089,5.33881759643555,4.41572952270508,6.90971088409424,4.31361532211304,5.88174057006836,6.54957866668701,5.6822772026062,5.46462297439575,5.6501898765564,4.89679193496704,4.65371370315552,4.4106330871582,4.83408784866333,4.9100866317749,7.4630970954895,7.370285987854,5.8189525604248,5.16400718688965,5.25228834152222,7.44426202774048,5.47155380249023,6.28143405914307,5.6796612739563,5.8691725730896,5.91982269287109,6.15087890625,5.51350021362305,3.5610466003418,6.35639333724976,4.7693772315979,5.93649339675903,4.30568313598633,6.3745641708374,6.23511075973511,6.24941921234131,4.88392210006714,5.84023141860962,6.51337099075317,4.40022325515747,4.2115650177002,7.37479209899902,7.50858688354492,3.44502329826355,6.01156187057495,4.02289485931396,4.7411322593689,5.1856894493103,4.62060165405273,4.32171487808228,4.66190910339355,6.60374355316162,7.2334451675415,6.8826847076416,6.37171459197998,6.20546007156372,5.00566339492798,5.2955470085144,3.05751395225525,4.04148817062378,3.61647987365723,5.49021434783936,4.92209911346436,5.26837491989136,5.60805606842041,4.55392169952393,6.46700477600098],"text":["<b>Happiness: 2.69<\/b><br>Country : Afghanistan","<b>Happiness: 5<\/b><br>Country : Albania","<b>Happiness: 5.04<\/b><br>Country : Algeria","<b>Happiness: 5.79<\/b><br>Country : Argentina","<b>Happiness: 5.06<\/b><br>Country : Armenia","<b>Happiness: 7.18<\/b><br>Country : Australia","<b>Happiness: 7.4<\/b><br>Country : Austria","<b>Happiness: 5.17<\/b><br>Country : Azerbaijan","<b>Happiness: 4.5<\/b><br>Country : Bangladesh","<b>Happiness: 5.23<\/b><br>Country : Belarus","<b>Happiness: 6.89<\/b><br>Country : Belgium","<b>Happiness: 5.82<\/b><br>Country : Benin","<b>Happiness: 5.92<\/b><br>Country : Bolivia","<b>Happiness: 5.89<\/b><br>Country : Bosnia and Herzegovina","<b>Happiness: 3.46<\/b><br>Country : Botswana","<b>Happiness: 6.19<\/b><br>Country : Brazil","<b>Happiness: 5.1<\/b><br>Country : Bulgaria","<b>Happiness: 4.93<\/b><br>Country : Burkina Faso","<b>Happiness: 3.78<\/b><br>Country : Burundi","<b>Happiness: 5.12<\/b><br>Country : Cambodia","<b>Happiness: 5.25<\/b><br>Country : Cameroon","<b>Happiness: 7.18<\/b><br>Country : Canada","<b>Happiness: 4.49<\/b><br>Country : Chad","<b>Happiness: 6.44<\/b><br>Country : Chile","<b>Happiness: 5.13<\/b><br>Country : China","<b>Happiness: 5.98<\/b><br>Country : Colombia","<b>Happiness: 3.97<\/b><br>Country : Comoros","<b>Happiness: 7.14<\/b><br>Country : Costa Rica","<b>Happiness: 5.54<\/b><br>Country : Croatia","<b>Happiness: 6.28<\/b><br>Country : Cyprus","<b>Happiness: 7.03<\/b><br>Country : Czech Republic","<b>Happiness: 7.65<\/b><br>Country : Denmark","<b>Happiness: 5.43<\/b><br>Country : Dominican Republic","<b>Happiness: 6.13<\/b><br>Country : Ecuador","<b>Happiness: 4.01<\/b><br>Country : Egypt","<b>Happiness: 6.28<\/b><br>Country : El Salvador","<b>Happiness: 6.09<\/b><br>Country : Estonia","<b>Happiness: 4.38<\/b><br>Country : Ethiopia","<b>Happiness: 7.86<\/b><br>Country : Finland","<b>Happiness: 6.67<\/b><br>Country : France","<b>Happiness: 4.78<\/b><br>Country : Gabon","<b>Happiness: 4.66<\/b><br>Country : Georgia","<b>Happiness: 7.12<\/b><br>Country : Germany","<b>Happiness: 5.41<\/b><br>Country : Greece","<b>Happiness: 6.63<\/b><br>Country : Guatemala","<b>Happiness: 5.25<\/b><br>Country : Guinea","<b>Happiness: 3.61<\/b><br>Country : Haiti","<b>Happiness: 5.91<\/b><br>Country : Honduras","<b>Happiness: 3.82<\/b><br>Country : India","<b>Happiness: 5.34<\/b><br>Country : Indonesia","<b>Happiness: 4.28<\/b><br>Country : Iran","<b>Happiness: 6.96<\/b><br>Country : Ireland","<b>Happiness: 6.93<\/b><br>Country : Israel","<b>Happiness: 6.52<\/b><br>Country : Italy","<b>Happiness: 5.79<\/b><br>Country : Japan","<b>Happiness: 4.64<\/b><br>Country : Jordan","<b>Happiness: 6.01<\/b><br>Country : Kazakhstan","<b>Happiness: 4.66<\/b><br>Country : Kenya","<b>Happiness: 6.39<\/b><br>Country : Kosovo","<b>Happiness: 5.3<\/b><br>Country : Kyrgyzstan","<b>Happiness: 4.86<\/b><br>Country : Laos","<b>Happiness: 5.9<\/b><br>Country : Latvia","<b>Happiness: 5.17<\/b><br>Country : Lebanon","<b>Happiness: 4.13<\/b><br>Country : Liberia","<b>Happiness: 5.49<\/b><br>Country : Libya","<b>Happiness: 6.31<\/b><br>Country : Lithuania","<b>Happiness: 7.24<\/b><br>Country : Luxembourg","<b>Happiness: 5.24<\/b><br>Country : Macedonia","<b>Happiness: 4.07<\/b><br>Country : Madagascar","<b>Happiness: 3.33<\/b><br>Country : Malawi","<b>Happiness: 5.34<\/b><br>Country : Malaysia","<b>Happiness: 4.42<\/b><br>Country : Mali","<b>Happiness: 6.91<\/b><br>Country : Malta","<b>Happiness: 4.31<\/b><br>Country : Mauritania","<b>Happiness: 5.88<\/b><br>Country : Mauritius","<b>Happiness: 6.55<\/b><br>Country : Mexico","<b>Happiness: 5.68<\/b><br>Country : Moldova","<b>Happiness: 5.46<\/b><br>Country : Mongolia","<b>Happiness: 5.65<\/b><br>Country : Montenegro","<b>Happiness: 4.9<\/b><br>Country : Morocco","<b>Happiness: 4.65<\/b><br>Country : Mozambique","<b>Happiness: 4.41<\/b><br>Country : Myanmar","<b>Happiness: 4.83<\/b><br>Country : Namibia","<b>Happiness: 4.91<\/b><br>Country : Nepal","<b>Happiness: 7.46<\/b><br>Country : Netherlands","<b>Happiness: 7.37<\/b><br>Country : New Zealand","<b>Happiness: 5.82<\/b><br>Country : Nicaragua","<b>Happiness: 5.16<\/b><br>Country : Niger","<b>Happiness: 5.25<\/b><br>Country : Nigeria","<b>Happiness: 7.44<\/b><br>Country : Norway","<b>Happiness: 5.47<\/b><br>Country : Pakistan","<b>Happiness: 6.28<\/b><br>Country : Panama","<b>Happiness: 5.68<\/b><br>Country : Peru","<b>Happiness: 5.87<\/b><br>Country : Philippines","<b>Happiness: 5.92<\/b><br>Country : Portugal","<b>Happiness: 6.15<\/b><br>Country : Romania","<b>Happiness: 5.51<\/b><br>Country : Russia","<b>Happiness: 3.56<\/b><br>Country : Rwanda","<b>Happiness: 6.36<\/b><br>Country : Saudi Arabia","<b>Happiness: 4.77<\/b><br>Country : Senegal","<b>Happiness: 5.94<\/b><br>Country : Serbia","<b>Happiness: 4.31<\/b><br>Country : Sierra Leone","<b>Happiness: 6.37<\/b><br>Country : Singapore","<b>Happiness: 6.24<\/b><br>Country : Slovakia","<b>Happiness: 6.25<\/b><br>Country : Slovenia","<b>Happiness: 4.88<\/b><br>Country : South Africa","<b>Happiness: 5.84<\/b><br>Country : South Korea","<b>Happiness: 6.51<\/b><br>Country : Spain","<b>Happiness: 4.4<\/b><br>Country : Sri Lanka","<b>Happiness: 4.21<\/b><br>Country : Swaziland","<b>Happiness: 7.37<\/b><br>Country : Sweden","<b>Happiness: 7.51<\/b><br>Country : Switzerland","<b>Happiness: 3.45<\/b><br>Country : Tanzania","<b>Happiness: 6.01<\/b><br>Country : Thailand","<b>Happiness: 4.02<\/b><br>Country : Togo","<b>Happiness: 4.74<\/b><br>Country : Tunisia","<b>Happiness: 5.19<\/b><br>Country : Turkey","<b>Happiness: 4.62<\/b><br>Country : Turkmenistan","<b>Happiness: 4.32<\/b><br>Country : Uganda","<b>Happiness: 4.66<\/b><br>Country : Ukraine","<b>Happiness: 6.6<\/b><br>Country : United Arab Emirates","<b>Happiness: 7.23<\/b><br>Country : United Kingdom","<b>Happiness: 6.88<\/b><br>Country : United States","<b>Happiness: 6.37<\/b><br>Country : Uruguay","<b>Happiness: 6.21<\/b><br>Country : Uzbekistan","<b>Happiness: 5.01<\/b><br>Country : Venezuela","<b>Happiness: 5.3<\/b><br>Country : Vietnam","<b>Happiness: 3.06<\/b><br>Country : Yemen","<b>Happiness: 4.04<\/b><br>Country : Zambia","<b>Happiness: 3.62<\/b><br>Country : Zimbabwe","<b>Happiness: 5.49<\/b><br>Country : Congo (Brazzaville)","<b>Happiness: 4.92<\/b><br>Country : Gambia","<b>Happiness: 5.27<\/b><br>Country : Ivory Coast","<b>Happiness: 5.61<\/b><br>Country : North Cyprus","<b>Happiness: 4.55<\/b><br>Country : Palestinian Territories","<b>Happiness: 6.47<\/b><br>Country : Taiwan Province of China"],"locations":["AFG","ALB","DZA","ARG","ARM","AUS","AUT","AZE","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","BDI","KHM","CMR","CAN","TCD","CHL","CHN","COL","COM","CRI","HRV","CYP","CZE","DNK","DOM","ECU","EGY","SLV","EST","ETH","FIN","FRA","GAB","GEO","DEU","GRC","GTM","GIN","HTI","HND","IND","IDN","IRN","IRL","ISR","ITA","JPN","JOR","KAZ","KEN","XKX","KGZ","LAO","LVA","LBN","LBR","LBY","LTU","LUX","MKD","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","MMR","NAM","NPL","NLD","NZL","NIC","NER","NGA","NOR","PAK","PAN","PER","PHL","PRT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","SWZ","SWE","CHE","TZA","THA","TGO","TUN","TUR","TKM","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE","COG","GMB","CIV","CYP","PSE","TWN"],"type":"choropleth","geo":"geo","frame":null},{"marker":{"color":"rgba(160,32,240,1)","size":[14.105970414125,45.8139657752613,66.5340832925055,84.7691790823693,69.3789520862243,92.0130803171257,86.8863142071641,63.3968072271626,49.7693424730333,85.6079420743125,90.1543266563401,13.3907200304551,71.6678692378552,73.2400010876809,65.8650199909074,81.4545394696982,89.0806353201478,42.4406450615709,10,65.8054801944277,44.5954554496869,88.8763302027522,26.6644451897073,82.9995794777509,64.5449045249911,79.5574128555297,34.5969235803975,80.4401732561206,86.5511331679231,71.382213459288,90.0369859216879,95.2692427689494,77.9395447387491,76.0232370147357,59.3619260634585,71.0987580878377,90.6726459698797,55.999886461378,95.9780744040534,88.6502034869713,64.0446822182774,33.8613972501709,88.3440785553688,65.6065633910455,74.1796071277448,36.2410999793435,19.591263346155,71.6512212796184,37.6131128521426,68.465911936964,44.0443125021765,91.6034181803956,86.5130607579513,87.0642359065415,82.3417436192964,66.6948954848361,91.3862970332548,49.9789285675098,70.8119538040924,84.4515583652919,49.6220547342027,87.1759199848488,72.0678603169635,53.5860076528847,71.1286514235501,90.0705179794131,85.1799145884248,75.5856672755453,42.5583292744071,17.7665998951437,64.8696309470027,47.3027719643565,90.4651422118946,67.0642740707842,86.3773010056754,77.2340834833267,83.3588361909605,92.2610286312918,76.8578460673894,22.4336419230389,55.6984199526476,62.063489318544,78.3408453284342,61.0747658981501,91.8880864591836,94.484781531178,76.5511522500445,32.9262564265006,56.125889286486,96.6636246584895,46.0782937053329,85.5756229239248,74.9348941872519,75.0252718844501,82.4644404668821,70.005896375494,86.3565098418425,33.6730638683372,78.9951927365813,55.8558724989899,76.3114259449108,39.6996032826973,85.2966542362546,88.8150944827385,92.1632554194416,74.2222413573495,66.3670562917808,86.6425842344467,71.831010641622,63.0438189908133,90.3099222737493,90.2399493274268,44.3262651565712,79.93234076089,30.1040571929341,54.7031275119823,75.2456990091131,100,55.9434379685554,84.9537878726439,75.9685488476068,89.9145252153537,85.4795027008356,87.9033209092821,88.5345801432399,82.4228044707502,72.529698936601,64.8720352942917,51.9599175270715,62.3448730871962,34.4744628740632,46.0315592049053,34.5212188418774,73.5105223587601,70.2848113946979,84.1473869658616],"sizemode":"area","line":{"color":"rgba(160,32,240,1)","width":0.1}},"type":"scattergeo","mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["country:  Afghanistan <br /> social support:  0.507515847682953","country:  Albania <br /> social support:  0.683591663837433","country:  Algeria <br /> social support:  0.798651337623596","country:  Argentina <br /> social support:  0.89991158246994","country:  Armenia <br /> social support:  0.81444901227951","country:  Australia <br /> social support:  0.940137267112732","country:  Austria <br /> social support:  0.911668121814728","country:  Azerbaijan <br /> social support:  0.781229913234711","country:  Bangladesh <br /> social support:  0.705556035041809","country:  Belarus <br /> social support:  0.904569268226624","country:  Belgium <br /> social support:  0.929815530776978","country:  Benin <br /> social support:  0.5035440325737","country:  Bolivia <br /> social support:  0.827159464359283","country:  Bosnia and Herzegovina <br /> social support:  0.835889577865601","country:  Botswana <br /> social support:  0.794936001300812","country:  Brazil <br /> social support:  0.881505250930786","country:  Bulgaria <br /> social support:  0.923853278160095","country:  Burkina Faso <br /> social support:  0.664859473705292","country:  Burundi <br /> social support:  0.484715223312378","country:  Cambodia <br /> social support:  0.794605374336243","country:  Cameroon <br /> social support:  0.676825225353241","country:  Canada <br /> social support:  0.92271876335144","country:  Chad <br /> social support:  0.577253580093384","country:  Chile <br /> social support:  0.89008492231369","country:  China <br /> social support:  0.787605345249176","country:  Colombia <br /> social support:  0.87097042798996","country:  Comoros <br /> social support:  0.621302962303162","country:  Costa Rica <br /> social support:  0.875872433185577","country:  Croatia <br /> social support:  0.909806847572327","country:  Cyprus <br /> social support:  0.825573205947876","country:  Czech Republic <br /> social support:  0.929163932800293","country:  Denmark <br /> social support:  0.95821887254715","country:  Dominican Republic <br /> social support:  0.861986339092255","country:  Ecuador <br /> social support:  0.851345002651215","country:  Egypt <br /> social support:  0.758824050426483","country:  El Salvador <br /> social support:  0.823999166488647","country:  Estonia <br /> social support:  0.932693779468536","country:  Ethiopia <br /> social support:  0.740154504776001","country:  Finland <br /> social support:  0.962155044078827","country:  France <br /> social support:  0.921463072299957","country:  Gabon <br /> social support:  0.784827589988708","country:  Georgia <br /> social support:  0.617218554019928","country:  Germany <br /> social support:  0.919763147830963","country:  Greece <br /> social support:  0.793500781059265","country:  Guatemala <br /> social support:  0.841107249259949","country:  Guinea <br /> social support:  0.630433142185211","country:  Haiti <br /> social support:  0.537975907325745","country:  Honduras <br /> social support:  0.827067017555237","country:  India <br /> social support:  0.638051986694336","country:  Indonesia <br /> social support:  0.809378862380981","country:  Iran <br /> social support:  0.673764705657959","country:  Ireland <br /> social support:  0.937862396240234","country:  Israel <br /> social support:  0.909595429897308","country:  Italy <br /> social support:  0.912656128406525","country:  Japan <br /> social support:  0.886431932449341","country:  Jordan <br /> social support:  0.799544334411621","country:  Kazakhstan <br /> social support:  0.936656713485718","country:  Kenya <br /> social support:  0.706719875335693","country:  Kosovo <br /> social support:  0.822406530380249","country:  Kyrgyzstan <br /> social support:  0.898147821426392","country:  Laos <br /> social support:  0.704738140106201","country:  Latvia <br /> social support:  0.913276314735413","country:  Lebanon <br /> social support:  0.829380631446838","country:  Liberia <br /> social support:  0.726750135421753","country:  Libya <br /> social support:  0.824165165424347","country:  Lithuania <br /> social support:  0.929350137710571","country:  Luxembourg <br /> social support:  0.902192413806915","country:  Macedonia <br /> social support:  0.848915159702301","country:  Madagascar <br /> social support:  0.665512979030609","country:  Malawi <br /> social support:  0.527843475341797","country:  Malaysia <br /> social support:  0.789408564567566","country:  Mali <br /> social support:  0.691859066486359","country:  Malta <br /> social support:  0.931541502475739","country:  Mauritania <br /> social support:  0.801595509052277","country:  Mauritius <br /> social support:  0.908841550350189","country:  Mexico <br /> social support:  0.858068883419037","country:  Moldova <br /> social support:  0.892079889774323","country:  Mongolia <br /> social support:  0.941514134407043","country:  Montenegro <br /> social support:  0.85597962141037","country:  Morocco <br /> social support:  0.553759753704071","country:  Mozambique <br /> social support:  0.738480448722839","country:  Myanmar <br /> social support:  0.773825943470001","country:  Namibia <br /> social support:  0.864214777946472","country:  Nepal <br /> social support:  0.768335521221161","country:  Netherlands <br /> social support:  0.939443171024323","country:  New Zealand <br /> social support:  0.953862726688385","country:  Nicaragua <br /> social support:  0.854276537895203","country:  Niger <br /> social support:  0.612025678157806","country:  Nigeria <br /> social support:  0.740854203701019","country:  Norway <br /> social support:  0.965961933135986","country:  Pakistan <br /> social support:  0.685059487819672","country:  Panama <br /> social support:  0.904389798641205","country:  Peru <br /> social support:  0.845301389694214","country:  Philippines <br /> social support:  0.845803260803223","country:  Portugal <br /> social support:  0.887113273143768","country:  Romania <br /> social support:  0.817930459976196","country:  Russia <br /> social support:  0.908726096153259","country:  Rwanda <br /> social support:  0.616172730922699","country:  Saudi Arabia <br /> social support:  0.86784839630127","country:  Senegal <br /> social support:  0.73935478925705","country:  Serbia <br /> social support:  0.852945327758789","country:  Sierra Leone <br /> social support:  0.64963835477829","country:  Singapore <br /> social support:  0.902840673923492","country:  Slovakia <br /> social support:  0.922378718852997","country:  Slovenia <br /> social support:  0.940971195697784","country:  South Africa <br /> social support:  0.841343998908997","country:  South Korea <br /> social support:  0.797723829746246","country:  Spain <br /> social support:  0.910314679145813","country:  Sri Lanka <br /> social support:  0.828065395355225","country:  Swaziland <br /> social support:  0.779269754886627","country:  Sweden <br /> social support:  0.930679559707642","country:  Switzerland <br /> social support:  0.930290997028351","country:  Tanzania <br /> social support:  0.675330400466919","country:  Thailand <br /> social support:  0.873052418231964","country:  Togo <br /> social support:  0.596353888511658","country:  Tunisia <br /> social support:  0.732953548431396","country:  Turkey <br /> social support:  0.84702730178833","country:  Turkmenistan <br /> social support:  0.984488964080811","country:  Uganda <br /> social support:  0.739841043949127","country:  Ukraine <br /> social support:  0.900936722755432","country:  United Arab Emirates <br /> social support:  0.851041316986084","country:  United Kingdom <br /> social support:  0.928483903408051","country:  United States <br /> social support:  0.903856039047241","country:  Uruguay <br /> social support:  0.917315602302551","country:  Uzbekistan <br /> social support:  0.920821011066437","country:  Venezuela <br /> social support:  0.886882066726685","country:  Vietnam <br /> social support:  0.831945240497589","country:  Yemen <br /> social support:  0.789421916007996","country:  Zambia <br /> social support:  0.71772038936615","country:  Zimbabwe <br /> social support:  0.775388479232788","country:  Congo (Brazzaville) <br /> social support:  0.620622932910919","country:  Gambia <br /> social support:  0.68479996919632","country:  Ivory Coast <br /> social support:  0.620882570743561","country:  North Cyprus <br /> social support:  0.837391793727875","country:  Palestinian Territories <br /> social support:  0.819479286670685","country:  Taiwan Province of China <br /> social support:  0.896458745002747"],"textfont":{"size":[14.105970414125,45.8139657752613,66.5340832925055,84.7691790823693,69.3789520862243,92.0130803171257,86.8863142071641,63.3968072271626,49.7693424730333,85.6079420743125,90.1543266563401,13.3907200304551,71.6678692378552,73.2400010876809,65.8650199909074,81.4545394696982,89.0806353201478,42.4406450615709,10,65.8054801944277,44.5954554496869,88.8763302027522,26.6644451897073,82.9995794777509,64.5449045249911,79.5574128555297,34.5969235803975,80.4401732561206,86.5511331679231,71.382213459288,90.0369859216879,95.2692427689494,77.9395447387491,76.0232370147357,59.3619260634585,71.0987580878377,90.6726459698797,55.999886461378,95.9780744040534,88.6502034869713,64.0446822182774,33.8613972501709,88.3440785553688,65.6065633910455,74.1796071277448,36.2410999793435,19.591263346155,71.6512212796184,37.6131128521426,68.465911936964,44.0443125021765,91.6034181803956,86.5130607579513,87.0642359065415,82.3417436192964,66.6948954848361,91.3862970332548,49.9789285675098,70.8119538040924,84.4515583652919,49.6220547342027,87.1759199848488,72.0678603169635,53.5860076528847,71.1286514235501,90.0705179794131,85.1799145884248,75.5856672755453,42.5583292744071,17.7665998951437,64.8696309470027,47.3027719643565,90.4651422118946,67.0642740707842,86.3773010056754,77.2340834833267,83.3588361909605,92.2610286312918,76.8578460673894,22.4336419230389,55.6984199526476,62.063489318544,78.3408453284342,61.0747658981501,91.8880864591836,94.484781531178,76.5511522500445,32.9262564265006,56.125889286486,96.6636246584895,46.0782937053329,85.5756229239248,74.9348941872519,75.0252718844501,82.4644404668821,70.005896375494,86.3565098418425,33.6730638683372,78.9951927365813,55.8558724989899,76.3114259449108,39.6996032826973,85.2966542362546,88.8150944827385,92.1632554194416,74.2222413573495,66.3670562917808,86.6425842344467,71.831010641622,63.0438189908133,90.3099222737493,90.2399493274268,44.3262651565712,79.93234076089,30.1040571929341,54.7031275119823,75.2456990091131,100,55.9434379685554,84.9537878726439,75.9685488476068,89.9145252153537,85.4795027008356,87.9033209092821,88.5345801432399,82.4228044707502,72.529698936601,64.8720352942917,51.9599175270715,62.3448730871962,34.4744628740632,46.0315592049053,34.5212188418774,73.5105223587601,70.2848113946979,84.1473869658616]},"line":{"color":"rgba(255,127,14,1)"},"geo":"geo","lat":[34.5166666666667,41.3166666666667,36.75,-34.5833333333333,40.1666666666667,-35.2666666666667,48.2,40.3833333333333,23.7166666666667,53.9,50.8333333333333,6.48333333333333,-16.5,43.8666666666667,-24.6333333333333,-15.7833333333333,42.6833333333333,12.3666666666667,-3.36666666666667,11.55,3.86666666666667,45.4166666666667,12.1,-33.45,39.9166666666667,4.6,-11.7,9.93333333333333,45.8,35.1666666666667,50.0833333333333,55.6666666666667,18.4666666666667,-0.216666666666667,30.05,13.7,59.4333333333333,9.03333333333333,60.1666666666667,48.8666666666667,0.383333333333333,41.6833333333333,52.5166666666667,37.9833333333333,14.6166666666667,9.5,18.5333333333333,14.1,28.6,-6.16666666666667,35.7,53.3166666666667,31.7666666666667,41.9,35.6833333333333,31.95,51.1666666666667,-1.28333333333333,42.6666666666667,42.8666666666667,17.9666666666667,56.95,33.8666666666667,6.3,32.8833333333333,54.6833333333333,49.6,42,-18.9166666666667,-13.9666666666667,3.16666666666667,12.65,35.8833333333333,18.0666666666667,-20.15,19.4333333333333,47,47.9166666666667,42.4333333333333,34.0166666666667,-25.95,16.8,-22.5666666666667,27.7166666666667,52.35,-41.3,12.1333333333333,13.5166666666667,9.08333333333333,59.9166666666667,33.6833333333333,8.96666666666667,-12.05,14.6,38.7166666666667,44.4333333333333,55.75,-1.95,24.65,14.7333333333333,44.8333333333333,8.48333333333333,1.28333333333333,48.15,46.05,-25.7,37.55,40.4,6.91666666666667,-26.3166666666667,59.3333333333333,46.9166666666667,-6.8,13.75,6.11666666666667,36.8,39.9333333333333,37.95,0.316666666666667,50.4333333333333,24.4666666666667,51.5,38.883333,-34.85,41.3166666666667,10.4833333333333,21.0333333333333,15.35,-15.4166666666667,-17.8166666666667,-4.267778,13.466667,6.85,35.183333,31.516667,25.066667],"lon":[69.183333,19.816667,3.05,-58.666667,44.5,149.133333,16.366667,49.866667,90.4,27.566667,4.333333,2.616667,-68.15,18.416667,25.9,-47.916667,23.316667,-1.516667,29.35,104.916667,11.516667,-75.7,15.033333,-70.666667,116.383333,-74.083333,43.233333,-84.083333,16,33.366667,14.466667,12.583333,-69.9,-78.5,31.25,-89.2,24.716667,38.7,24.933333,2.333333,9.45,44.833333,13.4,23.733333,-90.516667,-13.7,-72.333333,-87.216667,77.2,106.816667,51.416667,-6.233333,35.233333,12.483333,139.75,35.933333,71.416667,36.816667,21.166667,74.6,102.6,24.1,35.5,-10.8,13.166667,25.316667,6.116667,21.433333,47.516667,33.783333,101.7,-8,14.5,-15.966667,57.483333,-99.133333,28.85,106.916667,19.266667,-6.816667,32.583333,96.15,17.083333,85.316667,4.916667,174.783333,-86.25,2.116667,7.533333,10.75,73.05,-79.533333,-77.05,120.966667,-9.133333,26.1,37.6,30.05,46.7,-17.633333,20.5,-13.233333,103.85,17.116667,14.516667,28.216667,126.983333,-3.683333,79.833333,31.133333,18.05,7.466667,39.283333,100.516667,1.216667,10.183333,32.866667,58.383333,32.55,30.516667,54.366667,-0.083333,-77,-56.166667,69.25,-66.866667,105.85,44.2,28.283333,31.033333,15.291944,-16.6,5.3,33.366667,34.45,121.516667],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="section-ym2771-plot-2interaction-relationship-plot-create" class="section level3">
<h3>191115 ym2771 plot 2:interaction relationship plot create</h3>
</div>
<div id="section-try-to-add-marker-for-variable" class="section level2">
<h2>try to add marker for variable</h2>
<pre class="r"><code>l &lt;- list(color = toRGB(&quot;grey&quot;), width = 0.5)
# specify map projection/options
g &lt;- list(
  showframe = FALSE,
  showcoastlines = FALSE,
  projection = list(type = &#39;Mercator&#39;)
)
## making map according to year
## problem unsolved: How to make it a variable?
global_happy_compare &lt;- function(i,variable){
  happy_yeari_value = happy_location %&gt;% 
    filter(year == i) %&gt;% 
    select(variable,everything())
  happy_yeari_value %&gt;%
  plot_geo(marker = list(color = toRGB(&quot;purple&quot;),
                       #opacity = 0.5,    #用了整个地图会一起透明
                       #size = 0.5,
                       line = list(color = toRGB(&quot;purple&quot;),
                                   width = 0.1))) %&gt;%  
  add_trace(
    z = ~life_ladder, color = ~life_ladder, colors = &#39;Blues&#39;,
    text = ~label,locations = ~code, marker = list(line = l)
  ) %&gt;%
    add_markers(x = ~capital_longitude,
              y = ~capital_latitude,
              sizes = c(.1, 1), #改了没变化，不知道怎么用
              size = ~happy_yeari_value[[1]]^3,
              hoverinfo = &quot;text&quot;,
              text = ~paste(&quot;&lt;b&gt;Happiness:&quot; , round(life_ladder,2),
                            &#39;&lt;/b&gt;&lt;br&gt;country: &#39;, country_name,
                            &#39;&lt;/b&gt;&lt;br&gt;&#39;,variable,&#39;: &#39;, round(happy_yeari_value[[1]],2)
                            ) ### how to specify the labels, what format?
              ) %&gt;%
  layout(geo = g) %&gt;% 
  colorbar(title = &#39;Happiness index&#39;)
}</code></pre>
<pre class="r"><code>global_happy_compare(2011,&quot;social_support&quot;)</code></pre>
<pre><code>## Warning: `line.width` does not currently support multiple values.</code></pre>
<div id="htmlwidget-7dac04a5b1b80352deba" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-7dac04a5b1b80352deba">{"x":{"visdat":{"98f44ad0ec1c":["function () ","plotlyVisDat"]},"cur_data":"98f44ad0ec1c","attrs":{"98f44ad0ec1c":{"marker":{"color":"rgba(160,32,240,1)","line":{"color":"rgba(160,32,240,1)","width":0.1}},"alpha_stroke":1,"sizes":[0.1,1],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","size":{},"hoverinfo":"text","text":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","geo":{"domain":{"x":[0,1],"y":[0,1]},"showframe":false,"showcoastlines":false,"projection":{"type":"Mercator"}},"scene":{"zaxis":{"title":"life_ladder"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"Happiness index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(247,251,255,1)"],["0.0416666666666667","rgba(239,246,252,1)"],["0.0833333333333333","rgba(230,240,250,1)"],["0.125","rgba(222,235,247,1)"],["0.166666666666667","rgba(214,230,244,1)"],["0.208333333333333","rgba(206,224,242,1)"],["0.25","rgba(198,219,239,1)"],["0.291666666666667","rgba(185,213,234,1)"],["0.333333333333333","rgba(172,208,230,1)"],["0.375","rgba(158,202,225,1)"],["0.416666666666667","rgba(142,193,221,1)"],["0.458333333333333","rgba(125,183,218,1)"],["0.5","rgba(107,174,214,1)"],["0.541666666666667","rgba(94,165,209,1)"],["0.583333333333333","rgba(81,155,203,1)"],["0.625","rgba(66,146,198,1)"],["0.666666666666667","rgba(57,135,192,1)"],["0.708333333333333","rgba(46,124,187,1)"],["0.75","rgba(33,113,181,1)"],["0.791666666666667","rgba(27,102,173,1)"],["0.833333333333333","rgba(19,91,164,1)"],["0.875","rgba(8,81,156,1)"],["0.916666666666667","rgba(9,70,139,1)"],["0.958333333333333","rgba(9,59,123,1)"],["1","rgba(8,48,107,1)"]],"showscale":true,"marker":{"color":"rgba(160,32,240,1)","line":{"colorbar":{"title":"","ticklen":2},"cmin":2.93622088432312,"cmax":7.78823184967041,"colorscale":[["0","rgba(247,251,255,1)"],["0.0416666666666667","rgba(239,246,252,1)"],["0.0833333333333333","rgba(230,240,250,1)"],["0.125","rgba(222,235,247,1)"],["0.166666666666667","rgba(214,230,244,1)"],["0.208333333333333","rgba(206,224,242,1)"],["0.25","rgba(198,219,239,1)"],["0.291666666666667","rgba(185,213,234,1)"],["0.333333333333333","rgba(172,208,230,1)"],["0.375","rgba(158,202,225,1)"],["0.416666666666667","rgba(142,193,221,1)"],["0.458333333333333","rgba(125,183,218,1)"],["0.5","rgba(107,174,214,1)"],["0.541666666666667","rgba(94,165,209,1)"],["0.583333333333333","rgba(81,155,203,1)"],["0.625","rgba(66,146,198,1)"],["0.666666666666667","rgba(57,135,192,1)"],["0.708333333333333","rgba(46,124,187,1)"],["0.75","rgba(33,113,181,1)"],["0.791666666666667","rgba(27,102,173,1)"],["0.833333333333333","rgba(19,91,164,1)"],["0.875","rgba(8,81,156,1)"],["0.916666666666667","rgba(9,70,139,1)"],["0.958333333333333","rgba(9,59,123,1)"],["1","rgba(8,48,107,1)"]],"showscale":false,"color":"rgba(190,190,190,1)","width":0.5}},"z":[3.83171916007996,5.86742162704468,5.31719446182251,5.5890007019043,6.77580547332764,4.26049137115479,7.40561628341675,7.47051286697388,4.68046951293945,4.82397603988647,4.98564910888672,5.22530794143677,7.11136388778687,3.87027955055237,5.77887439727783,4.99467086791992,3.51992106437683,7.03781652450562,3.87538242340088,4.78536748886108,3.70589423179626,4.16122531890869,4.43388509750366,7.42605352401733,3.67782640457153,4.39348220825195,6.52633476257324,5.03720760345459,6.46395254135132,3.83848595619202,7.22888851165771,5.38537263870239,6.68960857391357,6.33149099349976,7.78823184967041,4.36919355392456,5.39653539657593,5.79508829116821,4.17415857315063,4.74129486083984,5.48681974411011,7.35422515869141,6.9591851234436,4.25540065765381,4.20303058624268,6.62131214141846,5.60819959640503,5.37203979492188,5.74335384368896,4.04456949234009,4.84457397460938,4.96103143692017,4.9176025390625,4.63487148284912,5.17260837554932,4.76750707626343,4.72536611557007,7.00690412521362,7.43314790725708,6.05708646774292,5.37444639205933,6.26279354095459,5.53932762145996,5.73566293716431,4.40531015396118,4.85950183868408,6.37769937515259,4.92104911804199,4.70374965667725,4.9668116569519,5.18757152557373,4.89751482009888,5.43243741989136,7.10140037536621,4.89818000793457,4.38141536712646,3.94606256484985,5.78636741638184,4.66683292388916,6.15471839904785,4.78480434417725,5.47707319259644,6.90951538085938,5.7922625541687,5.03117370605469,5.22311687469482,5.08497285842896,4.97111177444458,3.80944466590881,7.56379795074463,7.19063806533813,5.38570547103882,4.5558295249939,6.85298204421997,5.26718616485596,7.24808073043823,5.6770806312561,5.89245748519897,4.99395656585693,5.64620494842529,5.21999788284302,6.59160423278809,5.0227575302124,5.38876628875732,4.09743595123291,6.69978952407837,3.83420157432556,4.81518650054932,4.50164365768433,6.56104183197021,5.94504833221436,6.035964012146,4.93051147460938,6.94659900665283,6.51824903488159,4.18056917190552,4.31445646286011,4.86709117889404,7.38223218917847,4.03788948059082,4.26267147064209,4.07356214523315,6.66360902786255,2.93622088432312,6.51874589920044,4.8764820098877,5.27194404602051,5.79175472259521,4.82600116729736,5.08313274383545,7.11870145797729,6.86924886703491,7.1151385307312,6.55404710769653,5.73874425888062,6.57978916168213,5.76734447479248,3.74625563621521,4.9991135597229,4.84564161300659,4.50982427597046,4.51696395874023,5.47401094436646,4.75121974945068,4.93057155609131,6.30891513824463],"text":["<b>Happiness: 3.83<\/b><br>Country : Afghanistan","<b>Happiness: 5.87<\/b><br>Country : Albania","<b>Happiness: 5.32<\/b><br>Country : Algeria","<b>Happiness: 5.59<\/b><br>Country : Angola","<b>Happiness: 6.78<\/b><br>Country : Argentina","<b>Happiness: 4.26<\/b><br>Country : Armenia","<b>Happiness: 7.41<\/b><br>Country : Australia","<b>Happiness: 7.47<\/b><br>Country : Austria","<b>Happiness: 4.68<\/b><br>Country : Azerbaijan","<b>Happiness: 4.82<\/b><br>Country : Bahrain","<b>Happiness: 4.99<\/b><br>Country : Bangladesh","<b>Happiness: 5.23<\/b><br>Country : Belarus","<b>Happiness: 7.11<\/b><br>Country : Belgium","<b>Happiness: 3.87<\/b><br>Country : Benin","<b>Happiness: 5.78<\/b><br>Country : Bolivia","<b>Happiness: 4.99<\/b><br>Country : Bosnia and Herzegovina","<b>Happiness: 3.52<\/b><br>Country : Botswana","<b>Happiness: 7.04<\/b><br>Country : Brazil","<b>Happiness: 3.88<\/b><br>Country : Bulgaria","<b>Happiness: 4.79<\/b><br>Country : Burkina Faso","<b>Happiness: 3.71<\/b><br>Country : Burundi","<b>Happiness: 4.16<\/b><br>Country : Cambodia","<b>Happiness: 4.43<\/b><br>Country : Cameroon","<b>Happiness: 7.43<\/b><br>Country : Canada","<b>Happiness: 3.68<\/b><br>Country : Central African Republic","<b>Happiness: 4.39<\/b><br>Country : Chad","<b>Happiness: 6.53<\/b><br>Country : Chile","<b>Happiness: 5.04<\/b><br>Country : China","<b>Happiness: 6.46<\/b><br>Country : Colombia","<b>Happiness: 3.84<\/b><br>Country : Comoros","<b>Happiness: 7.23<\/b><br>Country : Costa Rica","<b>Happiness: 5.39<\/b><br>Country : Croatia","<b>Happiness: 6.69<\/b><br>Country : Cyprus","<b>Happiness: 6.33<\/b><br>Country : Czech Republic","<b>Happiness: 7.79<\/b><br>Country : Denmark","<b>Happiness: 4.37<\/b><br>Country : Djibouti","<b>Happiness: 5.4<\/b><br>Country : Dominican Republic","<b>Happiness: 5.8<\/b><br>Country : Ecuador","<b>Happiness: 4.17<\/b><br>Country : Egypt","<b>Happiness: 4.74<\/b><br>Country : El Salvador","<b>Happiness: 5.49<\/b><br>Country : Estonia","<b>Happiness: 7.35<\/b><br>Country : Finland","<b>Happiness: 6.96<\/b><br>Country : France","<b>Happiness: 4.26<\/b><br>Country : Gabon","<b>Happiness: 4.2<\/b><br>Country : Georgia","<b>Happiness: 6.62<\/b><br>Country : Germany","<b>Happiness: 5.61<\/b><br>Country : Ghana","<b>Happiness: 5.37<\/b><br>Country : Greece","<b>Happiness: 5.74<\/b><br>Country : Guatemala","<b>Happiness: 4.04<\/b><br>Country : Guinea","<b>Happiness: 4.84<\/b><br>Country : Haiti","<b>Happiness: 4.96<\/b><br>Country : Honduras","<b>Happiness: 4.92<\/b><br>Country : Hungary","<b>Happiness: 4.63<\/b><br>Country : India","<b>Happiness: 5.17<\/b><br>Country : Indonesia","<b>Happiness: 4.77<\/b><br>Country : Iran","<b>Happiness: 4.73<\/b><br>Country : Iraq","<b>Happiness: 7.01<\/b><br>Country : Ireland","<b>Happiness: 7.43<\/b><br>Country : Israel","<b>Happiness: 6.06<\/b><br>Country : Italy","<b>Happiness: 5.37<\/b><br>Country : Jamaica","<b>Happiness: 6.26<\/b><br>Country : Japan","<b>Happiness: 5.54<\/b><br>Country : Jordan","<b>Happiness: 5.74<\/b><br>Country : Kazakhstan","<b>Happiness: 4.41<\/b><br>Country : Kenya","<b>Happiness: 4.86<\/b><br>Country : Kosovo","<b>Happiness: 6.38<\/b><br>Country : Kuwait","<b>Happiness: 4.92<\/b><br>Country : Kyrgyzstan","<b>Happiness: 4.7<\/b><br>Country : Laos","<b>Happiness: 4.97<\/b><br>Country : Latvia","<b>Happiness: 5.19<\/b><br>Country : Lebanon","<b>Happiness: 4.9<\/b><br>Country : Lesotho","<b>Happiness: 5.43<\/b><br>Country : Lithuania","<b>Happiness: 7.1<\/b><br>Country : Luxembourg","<b>Happiness: 4.9<\/b><br>Country : Macedonia","<b>Happiness: 4.38<\/b><br>Country : Madagascar","<b>Happiness: 3.95<\/b><br>Country : Malawi","<b>Happiness: 5.79<\/b><br>Country : Malaysia","<b>Happiness: 4.67<\/b><br>Country : Mali","<b>Happiness: 6.15<\/b><br>Country : Malta","<b>Happiness: 4.78<\/b><br>Country : Mauritania","<b>Happiness: 5.48<\/b><br>Country : Mauritius","<b>Happiness: 6.91<\/b><br>Country : Mexico","<b>Happiness: 5.79<\/b><br>Country : Moldova","<b>Happiness: 5.03<\/b><br>Country : Mongolia","<b>Happiness: 5.22<\/b><br>Country : Montenegro","<b>Happiness: 5.08<\/b><br>Country : Morocco","<b>Happiness: 4.97<\/b><br>Country : Mozambique","<b>Happiness: 3.81<\/b><br>Country : Nepal","<b>Happiness: 7.56<\/b><br>Country : Netherlands","<b>Happiness: 7.19<\/b><br>Country : New Zealand","<b>Happiness: 5.39<\/b><br>Country : Nicaragua","<b>Happiness: 4.56<\/b><br>Country : Niger","<b>Happiness: 6.85<\/b><br>Country : Oman","<b>Happiness: 5.27<\/b><br>Country : Pakistan","<b>Happiness: 7.25<\/b><br>Country : Panama","<b>Happiness: 5.68<\/b><br>Country : Paraguay","<b>Happiness: 5.89<\/b><br>Country : Peru","<b>Happiness: 4.99<\/b><br>Country : Philippines","<b>Happiness: 5.65<\/b><br>Country : Poland","<b>Happiness: 5.22<\/b><br>Country : Portugal","<b>Happiness: 6.59<\/b><br>Country : Qatar","<b>Happiness: 5.02<\/b><br>Country : Romania","<b>Happiness: 5.39<\/b><br>Country : Russia","<b>Happiness: 4.1<\/b><br>Country : Rwanda","<b>Happiness: 6.7<\/b><br>Country : Saudi Arabia","<b>Happiness: 3.83<\/b><br>Country : Senegal","<b>Happiness: 4.82<\/b><br>Country : Serbia","<b>Happiness: 4.5<\/b><br>Country : Sierra Leone","<b>Happiness: 6.56<\/b><br>Country : Singapore","<b>Happiness: 5.95<\/b><br>Country : Slovakia","<b>Happiness: 6.04<\/b><br>Country : Slovenia","<b>Happiness: 4.93<\/b><br>Country : South Africa","<b>Happiness: 6.95<\/b><br>Country : South Korea","<b>Happiness: 6.52<\/b><br>Country : Spain","<b>Happiness: 4.18<\/b><br>Country : Sri Lanka","<b>Happiness: 4.31<\/b><br>Country : Sudan","<b>Happiness: 4.87<\/b><br>Country : Swaziland","<b>Happiness: 7.38<\/b><br>Country : Sweden","<b>Happiness: 4.04<\/b><br>Country : Syria","<b>Happiness: 4.26<\/b><br>Country : Tajikistan","<b>Happiness: 4.07<\/b><br>Country : Tanzania","<b>Happiness: 6.66<\/b><br>Country : Thailand","<b>Happiness: 2.94<\/b><br>Country : Togo","<b>Happiness: 6.52<\/b><br>Country : Trinidad and Tobago","<b>Happiness: 4.88<\/b><br>Country : Tunisia","<b>Happiness: 5.27<\/b><br>Country : Turkey","<b>Happiness: 5.79<\/b><br>Country : Turkmenistan","<b>Happiness: 4.83<\/b><br>Country : Uganda","<b>Happiness: 5.08<\/b><br>Country : Ukraine","<b>Happiness: 7.12<\/b><br>Country : United Arab Emirates","<b>Happiness: 6.87<\/b><br>Country : United Kingdom","<b>Happiness: 7.12<\/b><br>Country : United States","<b>Happiness: 6.55<\/b><br>Country : Uruguay","<b>Happiness: 5.74<\/b><br>Country : Uzbekistan","<b>Happiness: 6.58<\/b><br>Country : Venezuela","<b>Happiness: 5.77<\/b><br>Country : Vietnam","<b>Happiness: 3.75<\/b><br>Country : Yemen","<b>Happiness: 5<\/b><br>Country : Zambia","<b>Happiness: 4.85<\/b><br>Country : Zimbabwe","<b>Happiness: 4.51<\/b><br>Country : Congo (Brazzaville)","<b>Happiness: 4.52<\/b><br>Country : Congo (Kinshasa)","<b>Happiness: 5.47<\/b><br>Country : Hong Kong S.A.R. of China","<b>Happiness: 4.75<\/b><br>Country : Palestinian Territories","<b>Happiness: 4.93<\/b><br>Country : Somaliland region","<b>Happiness: 6.31<\/b><br>Country : Taiwan Province of China"],"locations":["AFG","ALB","DZA","AGO","ARG","ARM","AUS","AUT","AZE","BHR","BGD","BLR","BEL","BEN","BOL","BIH","BWA","BRA","BGR","BFA","BDI","KHM","CMR","CAN","CAF","TCD","CHL","CHN","COL","COM","CRI","HRV","CYP","CZE","DNK","DJI","DOM","ECU","EGY","SLV","EST","FIN","FRA","GAB","GEO","DEU","GHA","GRC","GTM","GIN","HTI","HND","HUN","IND","IDN","IRN","IRQ","IRL","ISR","ITA","JAM","JPN","JOR","KAZ","KEN","XKX","KWT","KGZ","LAO","LVA","LBN","LSO","LTU","LUX","MKD","MDG","MWI","MYS","MLI","MLT","MRT","MUS","MEX","MDA","MNG","MNE","MAR","MOZ","NPL","NLD","NZL","NIC","NER","OMN","PAK","PAN","PRY","PER","PHL","POL","PRT","QAT","ROU","RUS","RWA","SAU","SEN","SRB","SLE","SGP","SVK","SVN","ZAF","KOR","ESP","LKA","SDN","SWZ","SWE","SYR","TJK","TZA","THA","TGO","TTO","TUN","TUR","TKM","UGA","UKR","ARE","GBR","USA","URY","UZB","VEN","VNM","YEM","ZMB","ZWE","COG","COD","HKG","PSE","SOM","TWN"],"type":"choropleth","geo":"geo","frame":null},{"marker":{"color":"rgba(160,32,240,1)","size":[21.2964981953882,50.7540511091627,60.084102347713,44.8012896950628,77.0604371342832,42.067396512046,97.0846021030729,90.8589435660011,45.1294518916335,81.5826961350099,29.3984284862832,82.0800697342673,88.9600788849149,18.0539809529552,61.3758133929753,45.1371231742397,70.4383558597872,83.6617692200183,70.4922078499709,42.7264635296577,14.7167363951601,43.6330164681436,47.1713334040234,85.0251212627962,13.0134758617563,61.7867108598061,61.8336581303409,55.6985002572557,80.6724448816936,44.6050178544577,77.7636329311092,56.1742479970683,66.8969037583593,82.9776496495993,95.6173162037592,32.4339828749207,73.1341549112594,61.6284446955806,49.7240994437051,46.0911539239892,81.7904549922879,89.1961706279388,84.9280165937576,34.8641335511444,19.8768163494835,91.6799342881256,44.9890665592493,68.5887087514553,52.2630570238767,28.5336437622032,25.3518134520697,51.8404696852909,78.1471476320804,24.0023331479591,63.0216131317945,26.8477359411087,49.2780416439978,100,77.9175293510565,82.9275647316068,69.2457737857131,83.774625492347,74.4651792469465,80.8734126973561,67.4615141342132,50.6969632152988,75.3867149683733,77.6109764709975,40.0008282663548,65.2965588923891,46.3526253875209,62.8409235824738,82.4566440604715,88.2127419729415,55.1701666595067,61.6985490440056,30.0937748458016,52.6706083709414,57.2540417089786,85.2711027205625,49.1987863310565,58.1588193440708,62.8366164462454,72.5301506314821,91.8535185217023,61.5447528515546,64.7447319367445,61.543363268063,47.6581188287366,89.337624421963,93.4067157811127,58.1649181647714,61.5505608545149,null,20.4078242117458,74.0903635001475,72.4707189889903,50.218333858984,55.9931416962838,80.7775856943046,69.545881127801,69.8499064628218,49.5909788888035,75.7361814787922,25.6234675430664,63.9715834868693,28.95744206897,53.1655730942243,54.673355926509,80.75204684424,83.9224329840128,87.4545390842294,69.9271811831247,59.8632809740467,90.9351906608637,66.5335835672662,61.5754603807628,65.5275496116195,84.7348175167226,26.1968053841496,49.2763193835354,75.5301194487361,75.9536612890868,10,71.0599713328728,43.5373423571193,40.1467116244412,96.3589342974331,75.3494828819504,70.3129075845179,75.2608988440184,92.0747586718508,85.0341766183433,77.5821680009554,85.634887002181,87.3134724132098,79.1018829337032,36.1506104446023,71.3230772725789,71.4724933226562,32.9321376057565,48.1456681026772,67.4087098169962,49.2920918393048,55.8446407807095,70.9894866113199],"sizemode":"area","line":{"color":"rgba(160,32,240,1)","width":0.1}},"type":"scattergeo","mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["<b>Happiness: 3.83 <\/b><br>country:  Afghanistan <\/b><br> social_support :  0.52","<b>Happiness: 5.87 <\/b><br>country:  Albania <\/b><br> social_support :  0.76","<b>Happiness: 5.32 <\/b><br>country:  Algeria <\/b><br> social_support :  0.81","<b>Happiness: 5.59 <\/b><br>country:  Angola <\/b><br> social_support :  0.72","<b>Happiness: 6.78 <\/b><br>country:  Argentina <\/b><br> social_support :  0.89","<b>Happiness: 4.26 <\/b><br>country:  Armenia <\/b><br> social_support :  0.71","<b>Happiness: 7.41 <\/b><br>country:  Australia <\/b><br> social_support :  0.97","<b>Happiness: 7.47 <\/b><br>country:  Austria <\/b><br> social_support :  0.94","<b>Happiness: 4.68 <\/b><br>country:  Azerbaijan <\/b><br> social_support :  0.73","<b>Happiness: 4.82 <\/b><br>country:  Bahrain <\/b><br> social_support :  0.91","<b>Happiness: 4.99 <\/b><br>country:  Bangladesh <\/b><br> social_support :  0.61","<b>Happiness: 5.23 <\/b><br>country:  Belarus <\/b><br> social_support :  0.91","<b>Happiness: 7.11 <\/b><br>country:  Belgium <\/b><br> social_support :  0.94","<b>Happiness: 3.87 <\/b><br>country:  Benin <\/b><br> social_support :  0.48","<b>Happiness: 5.78 <\/b><br>country:  Bolivia <\/b><br> social_support :  0.82","<b>Happiness: 4.99 <\/b><br>country:  Bosnia and Herzegovina <\/b><br> social_support :  0.73","<b>Happiness: 3.52 <\/b><br>country:  Botswana <\/b><br> social_support :  0.86","<b>Happiness: 7.04 <\/b><br>country:  Brazil <\/b><br> social_support :  0.92","<b>Happiness: 3.88 <\/b><br>country:  Bulgaria <\/b><br> social_support :  0.86","<b>Happiness: 4.79 <\/b><br>country:  Burkina Faso <\/b><br> social_support :  0.71","<b>Happiness: 3.71 <\/b><br>country:  Burundi <\/b><br> social_support :  0.42","<b>Happiness: 4.16 <\/b><br>country:  Cambodia <\/b><br> social_support :  0.72","<b>Happiness: 4.43 <\/b><br>country:  Cameroon <\/b><br> social_support :  0.74","<b>Happiness: 7.43 <\/b><br>country:  Canada <\/b><br> social_support :  0.92","<b>Happiness: 3.68 <\/b><br>country:  Central African Republic <\/b><br> social_support :  0.39","<b>Happiness: 4.39 <\/b><br>country:  Chad <\/b><br> social_support :  0.82","<b>Happiness: 6.53 <\/b><br>country:  Chile <\/b><br> social_support :  0.82","<b>Happiness: 5.04 <\/b><br>country:  China <\/b><br> social_support :  0.79","<b>Happiness: 6.46 <\/b><br>country:  Colombia <\/b><br> social_support :  0.9","<b>Happiness: 3.84 <\/b><br>country:  Comoros <\/b><br> social_support :  0.72","<b>Happiness: 7.23 <\/b><br>country:  Costa Rica <\/b><br> social_support :  0.89","<b>Happiness: 5.39 <\/b><br>country:  Croatia <\/b><br> social_support :  0.79","<b>Happiness: 6.69 <\/b><br>country:  Cyprus <\/b><br> social_support :  0.84","<b>Happiness: 6.33 <\/b><br>country:  Czech Republic <\/b><br> social_support :  0.91","<b>Happiness: 7.79 <\/b><br>country:  Denmark <\/b><br> social_support :  0.96","<b>Happiness: 4.37 <\/b><br>country:  Djibouti <\/b><br> social_support :  0.63","<b>Happiness: 5.4 <\/b><br>country:  Dominican Republic <\/b><br> social_support :  0.87","<b>Happiness: 5.8 <\/b><br>country:  Ecuador <\/b><br> social_support :  0.82","<b>Happiness: 4.17 <\/b><br>country:  Egypt <\/b><br> social_support :  0.75","<b>Happiness: 4.74 <\/b><br>country:  El Salvador <\/b><br> social_support :  0.73","<b>Happiness: 5.49 <\/b><br>country:  Estonia <\/b><br> social_support :  0.91","<b>Happiness: 7.35 <\/b><br>country:  Finland <\/b><br> social_support :  0.94","<b>Happiness: 6.96 <\/b><br>country:  France <\/b><br> social_support :  0.92","<b>Happiness: 4.26 <\/b><br>country:  Gabon <\/b><br> social_support :  0.65","<b>Happiness: 4.2 <\/b><br>country:  Georgia <\/b><br> social_support :  0.5","<b>Happiness: 6.62 <\/b><br>country:  Germany <\/b><br> social_support :  0.95","<b>Happiness: 5.61 <\/b><br>country:  Ghana <\/b><br> social_support :  0.72","<b>Happiness: 5.37 <\/b><br>country:  Greece <\/b><br> social_support :  0.85","<b>Happiness: 5.74 <\/b><br>country:  Guatemala <\/b><br> social_support :  0.77","<b>Happiness: 4.04 <\/b><br>country:  Guinea <\/b><br> social_support :  0.6","<b>Happiness: 4.84 <\/b><br>country:  Haiti <\/b><br> social_support :  0.57","<b>Happiness: 4.96 <\/b><br>country:  Honduras <\/b><br> social_support :  0.77","<b>Happiness: 4.92 <\/b><br>country:  Hungary <\/b><br> social_support :  0.89","<b>Happiness: 4.63 <\/b><br>country:  India <\/b><br> social_support :  0.55","<b>Happiness: 5.17 <\/b><br>country:  Indonesia <\/b><br> social_support :  0.82","<b>Happiness: 4.77 <\/b><br>country:  Iran <\/b><br> social_support :  0.58","<b>Happiness: 4.73 <\/b><br>country:  Iraq <\/b><br> social_support :  0.75","<b>Happiness: 7.01 <\/b><br>country:  Ireland <\/b><br> social_support :  0.98","<b>Happiness: 7.43 <\/b><br>country:  Israel <\/b><br> social_support :  0.89","<b>Happiness: 6.06 <\/b><br>country:  Italy <\/b><br> social_support :  0.91","<b>Happiness: 5.37 <\/b><br>country:  Jamaica <\/b><br> social_support :  0.85","<b>Happiness: 6.26 <\/b><br>country:  Japan <\/b><br> social_support :  0.92","<b>Happiness: 5.54 <\/b><br>country:  Jordan <\/b><br> social_support :  0.88","<b>Happiness: 5.74 <\/b><br>country:  Kazakhstan <\/b><br> social_support :  0.9","<b>Happiness: 4.41 <\/b><br>country:  Kenya <\/b><br> social_support :  0.85","<b>Happiness: 4.86 <\/b><br>country:  Kosovo <\/b><br> social_support :  0.76","<b>Happiness: 6.38 <\/b><br>country:  Kuwait <\/b><br> social_support :  0.88","<b>Happiness: 4.92 <\/b><br>country:  Kyrgyzstan <\/b><br> social_support :  0.89","<b>Happiness: 4.7 <\/b><br>country:  Laos <\/b><br> social_support :  0.69","<b>Happiness: 4.97 <\/b><br>country:  Latvia <\/b><br> social_support :  0.84","<b>Happiness: 5.19 <\/b><br>country:  Lebanon <\/b><br> social_support :  0.73","<b>Happiness: 4.9 <\/b><br>country:  Lesotho <\/b><br> social_support :  0.82","<b>Happiness: 5.43 <\/b><br>country:  Lithuania <\/b><br> social_support :  0.91","<b>Happiness: 7.1 <\/b><br>country:  Luxembourg <\/b><br> social_support :  0.93","<b>Happiness: 4.9 <\/b><br>country:  Macedonia <\/b><br> social_support :  0.78","<b>Happiness: 4.38 <\/b><br>country:  Madagascar <\/b><br> social_support :  0.82","<b>Happiness: 3.95 <\/b><br>country:  Malawi <\/b><br> social_support :  0.61","<b>Happiness: 5.79 <\/b><br>country:  Malaysia <\/b><br> social_support :  0.77","<b>Happiness: 4.67 <\/b><br>country:  Mali <\/b><br> social_support :  0.8","<b>Happiness: 6.15 <\/b><br>country:  Malta <\/b><br> social_support :  0.92","<b>Happiness: 4.78 <\/b><br>country:  Mauritania <\/b><br> social_support :  0.75","<b>Happiness: 5.48 <\/b><br>country:  Mauritius <\/b><br> social_support :  0.8","<b>Happiness: 6.91 <\/b><br>country:  Mexico <\/b><br> social_support :  0.82","<b>Happiness: 5.79 <\/b><br>country:  Moldova <\/b><br> social_support :  0.87","<b>Happiness: 5.03 <\/b><br>country:  Mongolia <\/b><br> social_support :  0.95","<b>Happiness: 5.22 <\/b><br>country:  Montenegro <\/b><br> social_support :  0.82","<b>Happiness: 5.08 <\/b><br>country:  Morocco <\/b><br> social_support :  0.83","<b>Happiness: 4.97 <\/b><br>country:  Mozambique <\/b><br> social_support :  0.82","<b>Happiness: 3.81 <\/b><br>country:  Nepal <\/b><br> social_support :  0.74","<b>Happiness: 7.56 <\/b><br>country:  Netherlands <\/b><br> social_support :  0.94","<b>Happiness: 7.19 <\/b><br>country:  New Zealand <\/b><br> social_support :  0.95","<b>Happiness: 5.39 <\/b><br>country:  Nicaragua <\/b><br> social_support :  0.8","<b>Happiness: 4.56 <\/b><br>country:  Niger <\/b><br> social_support :  0.82","<b>Happiness: 6.85 <\/b><br>country:  Oman <\/b><br> social_support :  NA","<b>Happiness: 5.27 <\/b><br>country:  Pakistan <\/b><br> social_support :  0.51","<b>Happiness: 7.25 <\/b><br>country:  Panama <\/b><br> social_support :  0.88","<b>Happiness: 5.68 <\/b><br>country:  Paraguay <\/b><br> social_support :  0.87","<b>Happiness: 5.89 <\/b><br>country:  Peru <\/b><br> social_support :  0.76","<b>Happiness: 4.99 <\/b><br>country:  Philippines <\/b><br> social_support :  0.79","<b>Happiness: 5.65 <\/b><br>country:  Poland <\/b><br> social_support :  0.9","<b>Happiness: 5.22 <\/b><br>country:  Portugal <\/b><br> social_support :  0.86","<b>Happiness: 6.59 <\/b><br>country:  Qatar <\/b><br> social_support :  0.86","<b>Happiness: 5.02 <\/b><br>country:  Romania <\/b><br> social_support :  0.75","<b>Happiness: 5.39 <\/b><br>country:  Russia <\/b><br> social_support :  0.88","<b>Happiness: 4.1 <\/b><br>country:  Rwanda <\/b><br> social_support :  0.57","<b>Happiness: 6.7 <\/b><br>country:  Saudi Arabia <\/b><br> social_support :  0.83","<b>Happiness: 3.83 <\/b><br>country:  Senegal <\/b><br> social_support :  0.6","<b>Happiness: 4.82 <\/b><br>country:  Serbia <\/b><br> social_support :  0.77","<b>Happiness: 4.5 <\/b><br>country:  Sierra Leone <\/b><br> social_support :  0.78","<b>Happiness: 6.56 <\/b><br>country:  Singapore <\/b><br> social_support :  0.9","<b>Happiness: 5.95 <\/b><br>country:  Slovakia <\/b><br> social_support :  0.92","<b>Happiness: 6.04 <\/b><br>country:  Slovenia <\/b><br> social_support :  0.93","<b>Happiness: 4.93 <\/b><br>country:  South Africa <\/b><br> social_support :  0.86","<b>Happiness: 6.95 <\/b><br>country:  South Korea <\/b><br> social_support :  0.81","<b>Happiness: 6.52 <\/b><br>country:  Spain <\/b><br> social_support :  0.94","<b>Happiness: 4.18 <\/b><br>country:  Sri Lanka <\/b><br> social_support :  0.84","<b>Happiness: 4.31 <\/b><br>country:  Sudan <\/b><br> social_support :  0.82","<b>Happiness: 4.87 <\/b><br>country:  Swaziland <\/b><br> social_support :  0.84","<b>Happiness: 7.38 <\/b><br>country:  Sweden <\/b><br> social_support :  0.92","<b>Happiness: 4.04 <\/b><br>country:  Syria <\/b><br> social_support :  0.58","<b>Happiness: 4.26 <\/b><br>country:  Tajikistan <\/b><br> social_support :  0.75","<b>Happiness: 4.07 <\/b><br>country:  Tanzania <\/b><br> social_support :  0.88","<b>Happiness: 6.66 <\/b><br>country:  Thailand <\/b><br> social_support :  0.88","<b>Happiness: 2.94 <\/b><br>country:  Togo <\/b><br> social_support :  0.3","<b>Happiness: 6.52 <\/b><br>country:  Trinidad and Tobago <\/b><br> social_support :  0.86","<b>Happiness: 4.88 <\/b><br>country:  Tunisia <\/b><br> social_support :  0.71","<b>Happiness: 5.27 <\/b><br>country:  Turkey <\/b><br> social_support :  0.69","<b>Happiness: 5.79 <\/b><br>country:  Turkmenistan <\/b><br> social_support :  0.96","<b>Happiness: 4.83 <\/b><br>country:  Uganda <\/b><br> social_support :  0.88","<b>Happiness: 5.08 <\/b><br>country:  Ukraine <\/b><br> social_support :  0.86","<b>Happiness: 7.12 <\/b><br>country:  United Arab Emirates <\/b><br> social_support :  0.88","<b>Happiness: 6.87 <\/b><br>country:  United Kingdom <\/b><br> social_support :  0.95","<b>Happiness: 7.12 <\/b><br>country:  United States <\/b><br> social_support :  0.92","<b>Happiness: 6.55 <\/b><br>country:  Uruguay <\/b><br> social_support :  0.89","<b>Happiness: 5.74 <\/b><br>country:  Uzbekistan <\/b><br> social_support :  0.92","<b>Happiness: 6.58 <\/b><br>country:  Venezuela <\/b><br> social_support :  0.93","<b>Happiness: 5.77 <\/b><br>country:  Vietnam <\/b><br> social_support :  0.9","<b>Happiness: 3.75 <\/b><br>country:  Yemen <\/b><br> social_support :  0.66","<b>Happiness: 5 <\/b><br>country:  Zambia <\/b><br> social_support :  0.86","<b>Happiness: 4.85 <\/b><br>country:  Zimbabwe <\/b><br> social_support :  0.86","<b>Happiness: 4.51 <\/b><br>country:  Congo (Brazzaville) <\/b><br> social_support :  0.64","<b>Happiness: 4.52 <\/b><br>country:  Congo (Kinshasa) <\/b><br> social_support :  0.74","<b>Happiness: 5.47 <\/b><br>country:  Hong Kong S.A.R. of China <\/b><br> social_support :  0.85","<b>Happiness: 4.75 <\/b><br>country:  Palestinian Territories <\/b><br> social_support :  0.75","<b>Happiness: 4.93 <\/b><br>country:  Somaliland region <\/b><br> social_support :  0.79","<b>Happiness: 6.31 <\/b><br>country:  Taiwan Province of China <\/b><br> social_support :  0.86"],"textfont":{"size":[21.2964981953882,50.7540511091627,60.084102347713,44.8012896950628,77.0604371342832,42.067396512046,97.0846021030729,90.8589435660011,45.1294518916335,81.5826961350099,29.3984284862832,82.0800697342673,88.9600788849149,18.0539809529552,61.3758133929753,45.1371231742397,70.4383558597872,83.6617692200183,70.4922078499709,42.7264635296577,14.7167363951601,43.6330164681436,47.1713334040234,85.0251212627962,13.0134758617563,61.7867108598061,61.8336581303409,55.6985002572557,80.6724448816936,44.6050178544577,77.7636329311092,56.1742479970683,66.8969037583593,82.9776496495993,95.6173162037592,32.4339828749207,73.1341549112594,61.6284446955806,49.7240994437051,46.0911539239892,81.7904549922879,89.1961706279388,84.9280165937576,34.8641335511444,19.8768163494835,91.6799342881256,44.9890665592493,68.5887087514553,52.2630570238767,28.5336437622032,25.3518134520697,51.8404696852909,78.1471476320804,24.0023331479591,63.0216131317945,26.8477359411087,49.2780416439978,100,77.9175293510565,82.9275647316068,69.2457737857131,83.774625492347,74.4651792469465,80.8734126973561,67.4615141342132,50.6969632152988,75.3867149683733,77.6109764709975,40.0008282663548,65.2965588923891,46.3526253875209,62.8409235824738,82.4566440604715,88.2127419729415,55.1701666595067,61.6985490440056,30.0937748458016,52.6706083709414,57.2540417089786,85.2711027205625,49.1987863310565,58.1588193440708,62.8366164462454,72.5301506314821,91.8535185217023,61.5447528515546,64.7447319367445,61.543363268063,47.6581188287366,89.337624421963,93.4067157811127,58.1649181647714,61.5505608545149,null,20.4078242117458,74.0903635001475,72.4707189889903,50.218333858984,55.9931416962838,80.7775856943046,69.545881127801,69.8499064628218,49.5909788888035,75.7361814787922,25.6234675430664,63.9715834868693,28.95744206897,53.1655730942243,54.673355926509,80.75204684424,83.9224329840128,87.4545390842294,69.9271811831247,59.8632809740467,90.9351906608637,66.5335835672662,61.5754603807628,65.5275496116195,84.7348175167226,26.1968053841496,49.2763193835354,75.5301194487361,75.9536612890868,10,71.0599713328728,43.5373423571193,40.1467116244412,96.3589342974331,75.3494828819504,70.3129075845179,75.2608988440184,92.0747586718508,85.0341766183433,77.5821680009554,85.634887002181,87.3134724132098,79.1018829337032,36.1506104446023,71.3230772725789,71.4724933226562,32.9321376057565,48.1456681026772,67.4087098169962,49.2920918393048,55.8446407807095,70.9894866113199]},"line":{"color":"rgba(255,127,14,1)"},"geo":"geo","lat":[34.5166666666667,41.3166666666667,36.75,-8.83333333333333,-34.5833333333333,40.1666666666667,-35.2666666666667,48.2,40.3833333333333,26.2333333333333,23.7166666666667,53.9,50.8333333333333,6.48333333333333,-16.5,43.8666666666667,-24.6333333333333,-15.7833333333333,42.6833333333333,12.3666666666667,-3.36666666666667,11.55,3.86666666666667,45.4166666666667,4.36666666666667,12.1,-33.45,39.9166666666667,4.6,-11.7,9.93333333333333,45.8,35.1666666666667,50.0833333333333,55.6666666666667,11.5833333333333,18.4666666666667,-0.216666666666667,30.05,13.7,59.4333333333333,60.1666666666667,48.8666666666667,0.383333333333333,41.6833333333333,52.5166666666667,5.55,37.9833333333333,14.6166666666667,9.5,18.5333333333333,14.1,47.5,28.6,-6.16666666666667,35.7,33.3333333333333,53.3166666666667,31.7666666666667,41.9,18,35.6833333333333,31.95,51.1666666666667,-1.28333333333333,42.6666666666667,29.3666666666667,42.8666666666667,17.9666666666667,56.95,33.8666666666667,-29.3166666666667,54.6833333333333,49.6,42,-18.9166666666667,-13.9666666666667,3.16666666666667,12.65,35.8833333333333,18.0666666666667,-20.15,19.4333333333333,47,47.9166666666667,42.4333333333333,34.0166666666667,-25.95,27.7166666666667,52.35,-41.3,12.1333333333333,13.5166666666667,23.6166666666667,33.6833333333333,8.96666666666667,-25.2666666666667,-12.05,14.6,52.25,38.7166666666667,25.2833333333333,44.4333333333333,55.75,-1.95,24.65,14.7333333333333,44.8333333333333,8.48333333333333,1.28333333333333,48.15,46.05,-25.7,37.55,40.4,6.91666666666667,15.6,-26.3166666666667,59.3333333333333,33.5,38.55,-6.8,13.75,6.11666666666667,10.65,36.8,39.9333333333333,37.95,0.316666666666667,50.4333333333333,24.4666666666667,51.5,38.883333,-34.85,41.3166666666667,10.4833333333333,21.0333333333333,15.35,-15.4166666666667,-17.8166666666667,-4.267778,-4.316667,114.1,31.516667,9.55,25.066667],"lon":[69.183333,19.816667,3.05,13.216667,-58.666667,44.5,149.133333,16.366667,49.866667,50.566667,90.4,27.566667,4.333333,2.616667,-68.15,18.416667,25.9,-47.916667,23.316667,-1.516667,29.35,104.916667,11.516667,-75.7,18.583333,15.033333,-70.666667,116.383333,-74.083333,43.233333,-84.083333,16,33.366667,14.466667,12.583333,43.15,-69.9,-78.5,31.25,-89.2,24.716667,24.933333,2.333333,9.45,44.833333,13.4,-0.216667,23.733333,-90.516667,-13.7,-72.333333,-87.216667,19.083333,77.2,106.816667,51.416667,44.4,-6.233333,35.233333,12.483333,-76.8,139.75,35.933333,71.416667,36.816667,21.166667,47.966667,74.6,102.6,24.1,35.5,27.483333,25.316667,6.116667,21.433333,47.516667,33.783333,101.7,-8,14.5,-15.966667,57.483333,-99.133333,28.85,106.916667,19.266667,-6.816667,32.583333,85.316667,4.916667,174.783333,-86.25,2.116667,58.583333,73.05,-79.533333,-57.666667,-77.05,120.966667,21,-9.133333,51.533333,26.1,37.6,30.05,46.7,-17.633333,20.5,-13.233333,103.85,17.116667,14.516667,28.216667,126.983333,-3.683333,79.833333,32.533333,31.133333,18.05,36.3,68.766667,39.283333,100.516667,1.216667,-61.516667,10.183333,32.866667,58.383333,32.55,30.516667,54.366667,-0.083333,-77,-56.166667,69.25,-66.866667,105.85,44.2,28.283333,31.033333,15.291944,15.316667,22.2,34.45,44.05,121.516667],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="section-ym2771-add-shiny-on-plot-2" class="section level3">
<h3>191116 ym2771 Add shiny on plot 2</h3>
<pre class="r"><code>ui &lt;- shinyUI(fluidPage(
  titlePanel(&quot;relationship plot&quot;),
  sidebarPanel(
    selectInput(&#39;year&#39;, &#39;Year&#39;, unique(happy$year),
    selected = &quot;2011&quot;),
    selectInput(&#39;variable&#39;, &#39;Predictor&#39;, names(happy)[3:11],
    selected = &quot;social_support&quot;)),
  mainPanel(
    plotlyOutput(&quot;Plot1&quot;)
  )
))


## instead with world map 

server &lt;- shinyServer(function(input, output) {

  output$Plot1 &lt;- renderPlotly({

    ##plot function
    p &lt;- global_happy_compare(as.numeric(input$year),as.character(input$variable)) 
    ## When having 2 data input, we need to put it together? how could we use it separatly?
    layout(p)
  })
})
shinyApp(ui, server)</code></pre>
<iframe data-deferred-src="appf0554111d97e6a289a3a8b168b81e4ea/?w=&amp;__subapp__=1" width="100%" height="400" class="shiny-frame shiny-frame-deferred"></iframe>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
